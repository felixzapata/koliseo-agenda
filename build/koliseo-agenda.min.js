!function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("lodash/collection/find"),s=r(a),l=function c(e){var t=e.id,n=e.start,r=e.end,o=e.contents;i(this,c),this.colSpan=this.rowSpan=1,this.id=t,this.start=n,this.end=r,this.type=o&&o.type||void 0,this.contents=o},u=function(){function e(t){function n(e){u.indexOf(e)>-1||u.push(e)}var r=this,o=t.id,a=t.name,s=t.tracks;i(this,e),s.sort(function(e,t){return e.name.localeCompare(t.name)}),this.id=o,this.name=a,this.tracks=s;var u=[],c=this.colLabels=[];s.forEach(function(e,t){var r=e.slots;r.forEach(function(e){var t=e.start,r=e.end;n(t),n(r)})}),u.sort(),u=this.rowLabels=u.map(function(e,t){return{start:e,end:t<u.length-1?u[t+1]:void 0}}),this.rowLabels.pop(),this.data=u.map(function(e){return[]}),s.forEach(function(e,t){var n=(e.id,e.name),i=e.slots;c.push(n),i.forEach(function(e){var n=r.getRowLabelIndex({start:e.start}),i=r.data[n],o=i[t]=new l(e),a=r.getRowLabelIndex({end:e.end});o.rowSpan=a-n+1})}),this.data.forEach(function(e,t){e.forEach(function(t,n){if(t&&"EXTEND"!=t.type){for(var r=1,i=s[n].id;n+r<e.length;){var o=e[n+r];if(!o||"EXTEND"!=o.type||o.contents.trackId!=i)break;e[n+r]=void 0,r++,o.contents.merged=!0}t.colSpan=r}})})}return o(e,[{key:"getRowLabelIndex",value:function(e){return this.rowLabels.indexOf(s["default"](this.rowLabels,e))}},{key:"getCoords",value:function(e){for(var t=0;t<this.data.length;t++)for(var n=this.data[t],r=0;r<n.length;r++)if(n[r]&&n[r].id==e)return{row:t,col:r};return null}},{key:"isEmpty",value:function(){return 0===this.colLabels.length}},{key:"findTalk",value:function(e,t){var n=e.row,r=e.col,i=t.rowDelta,o=t.colDelta,a=n+i,s=r+o;if(s>-1&&a>-1){if(o){var l=this.data[a],u=l&&l[s];return u&&"TALK"==u.type?u:this.findTalk({row:a,col:s},{rowDelta:1,colDelta:0})||this.findTalk({row:a,col:s},{rowDelta:-1,colDelta:0})}if(i)for(;a>=0&&a<this.data.length;){var c=this.data[a],u=c&&c[s];if(u&&"TALK"==u.type)return u;a+=i}}return null}}]),e}();n.AgendaDayTableModel=u},{"lodash/collection/find":13}],2:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("./feedback"),a=function(){function e(t){r(this,e),this.model=t}return i(e,[{key:"render",value:function(){this.model;return this.model.isEmpty()?"<h3>Nothing to see here</h3><p>There are no entries scheduled for this day.</p>":'\n      <table class="ka-table">\n      <thead class="ka-head"><tr>'+this.renderColLabels()+"</tr></thead>\n      <tbody>"+this.renderBody()+"</tbody>\n      </table>\n      "}},{key:"renderColLabels",value:function(){var e=[""].concat(this.model.colLabels);return e.map(function(e,t){var n="";return'<th class="ka-table-th" data-track-id="'+n+'">'+e+"</th>"}).join("")}},{key:"renderBody",value:function(){var e=this,t=this.model.rowLabels;return t.map(function(t,n){var r=t.start,i=t.end,o=e.model.data[n];return'\n          <tr class="ka-table-tr">\n          <td class="ka-table-th">'+r+"-"+i+"</td>\n          "+(o?o.map(function(t){return t?e.renderCell(t):""}).join(""):"")+"\n          </tr>\n          "}).join("")}},{key:"renderCell",value:function(e){var t=(e.start,e.end,e.contents),n=e.rowSpan,r=e.colSpan,i=t&&t.type,o="TALK"===i?this.renderTalk(t):"BREAK"===i?t.title:"EXTEND"===i?"Extended from <b>"+this.model.tracks.find(function(e){return e.id==t.trackId}).name+"</b>":"Empty slot";return"EXTEND"===i&&t.merged?"":' <td class="ka-table-td '+(i&&i.toLowerCase()||"")+'" rowspan="'+n+'" colspan="'+r+'"> '+o+" </td> "}},{key:"renderTalk",value:function(e){var t=this,n=e.id,r=e.hash,i=e.title,a=(e.description,e.authors);e.tags,e.feedback;return'\n      <p>\n        <a href="#'+r+'" data-id="'+n+'" data-hash="'+r+'" class="ka-talk-title">'+i+"</a>\n      </p>\n      "+new o.TalkFeedback(arguments[0]).renderFeedback()+'\n      <p class="ka-author-brief">'+a.map(function(e){return t.renderAuthor(e)}).join(", ")+"</p>\n      "}},{key:"renderAuthor",value:function(e){var t=(e.id,e.uuid,e.name);e.avatar,e.description;return""+t}}]),e}();n.AgendaDayTemplate=a},{"./feedback":5}],3:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("./AgendaDayTemplate"),a=e("./AgendaDayTableModel"),s=e("./util"),l=e("./TalkDetailsPopup"),u=function(){function e(t){var n=this,i=t.c4p,o=t.agenda,a=t.element;r(this,e),this.c4p=i,this.days=o.days,this.pageTitle=document.title,this.talksByHash={},o.days.forEach(function(e){e.tracks.forEach(function(t){t.slots.forEach(function(t){if(t.contents&&"TALK"===t.contents.type){var r=t.contents.hash=e.id+"/"+t.id;n.talksByHash[r]=t}})})}),this.tagColors={},i.tagCategories&&Object.keys(i.tagCategories).forEach(function(e,t){return n.tagColors[e]=t}),this.models={},this.element=a,Koliseo.auth.on("koliseo.login",this.renderUserInfo),Koliseo.auth.on("koliseo.logout",this.renderUserInfo)}return i(e,[{key:"render",value:function(){var e=location.hash?/#([^\/]+)(\/.+)?/.exec(location.hash)[1]:"",t=e&&location.hash.substring(1),n=(this.days.length>1?this.renderDayTabs():'<h2 class="kday-title">'+this.days[0].name+"</h2>")+this.renderWorkspace()+this.renderHint();this.element.classList.add("ka"),this.element.innerHTML=n,document.body.addEventListener("click",this.onClick.bind(this)),document.body.addEventListener("keyup",this.onKeyPress.bind(this)),this.selectDay(e);var r=this.selectTalk(t);this.scrollToTalk(r),this.renderUserInfo()}},{key:"renderDayTabs",value:function(){var e=this.days.map(function(e){var t=e.id,n=e.name;return'\n        <li class="ka-tab-li">\n        <a class="ka-tab-a" data-day-id="'+t+'" href="#'+t+'">'+n+"</a>\n        </li>\n      "}).join("");return'\n      <ul class="ka-tabs">\n        '+e+'\n        <li class="ka-tab-li ka-right" id="ka-user-info"></li>\n      </ul>\n    '}},{key:"renderUserInfo",value:function(){var e=document.getElementById("ka-user-info");e.innerHTML=Koliseo.auth.currentUser?'<button onclick="Koliseo.auth.logout()" class="ka-button ka-button-secondary">Log out</button>':'<button onclick="Koliseo.auth.login()" class="ka-button">Log in</button>'}},{key:"renderWorkspace",value:function(){return'<div class="kworkspace"></div><div class="ka-overlay ka-hidden"></div>'}},{key:"renderHint",value:function(){return'\n      <div class="ka-hint">\n        <a href="http://koliseo.com" target="_blank" class="ka-logo"></a>\n        <p class="ka-hint-p">Using a keyboard? Try using the cursors to move between talks</p>\n        <p class="ka-hint-p small">Handcrafted with ♥ at 30,000 feet of altitude, some point between Madrid and Berlin</p>\n      </div>\n    '}},{key:"selectDay",value:function(e){e=this.days.filter(function(t){return t.id==e}).length?e:this.days[0].id+"",this.selectedDayId=e;var t=this.models[e];if(!t){var n=this.days.filter(function(t){return t.id==e})[0];t=this.models[e]=new a.AgendaDayTableModel(n)}Array.prototype.forEach.call(this.element.querySelectorAll(".ka-tab-a"),function(t){t.classList[t.getAttribute("data-day-id")===e?"add":"remove"]("selected")}),this.element.querySelector(".kworkspace").innerHTML=new o.AgendaDayTemplate(t).render(),this.pushState(t.name,e)}},{key:"selectTalk",value:function(e,t){var n=this.talksByHash[e];if(n){this.selectedTalkHash&&this.unselectTalk();var r=document.querySelector('.ka-talk-title[data-hash="'+e+'"]'),i=this.$cellContent=s.closest(r,".ka-table-td"),o=(i.getBoundingClientRect(),this.getSelectedTableModel());this.selectedTalkHash=e,this.selectedTalkCoords=o.getCoords(n.id),new l.TalkDetailsPopup({talk:n.contents,tagColors:this.tagColors}).render(),this.pushState(n.title,e)}return n}},{key:"getSelectedTableModel",value:function(){return this.models[this.selectedDayId]}},{key:"rowForDetails",value:function(e){for(var t=parseInt(e.getAttribute("rowSpan")||"1"),n=e.parentElement,r=1;t>r;r++)n=n.nextElementSibling;return n}},{key:"pushState",value:function(e,t){"undefined"!=typeof history&&history.pushState&&history.pushState({},e,location.pathname+location.search+"#"+t)}},{key:"unselectTalk",value:function(){this.selectedTalkHash=void 0,this.selectedTalkCoords=void 0;var e=document.querySelector(".ka-table-td.selected");e&&e.classList.remove("selected");var t=document.querySelector(".ka-talk-details-window");t&&(t.parentNode.removeChild(t),this.pushState(this.models[this.selectedDayId].name,this.selectedDayId)),document.querySelector(".ka-overlay").classList.add("ka-hidden")}},{key:"scrollToTalk",value:function(e){if(e&&e.contents){var t=document.querySelector('.ka-talk-title[data-id="'+e.contents.id+'"]');t&&t.scrollIntoView(!0)}}},{key:"onClick",value:function(e){var t=e.target;if(t&&0==e.button&&!e.ctrlKey&&!e.metaKey){var n=t.classList;if(n.contains("ka-talk-title"))if(e.preventDefault(),s.closest(t,".selected"))this.unselectTalk();else{var r=t.getAttribute("href").substring(1);this.selectTalk(r)}else n.contains("ka-tab-a")?(e.preventDefault(),this.selectDay(t.getAttribute("data-day-id"))):(n.contains("ka-close")||n.contains("ka-overlay"))&&this.unselectTalk()}}},{key:"onClose",value:function(){this.unselectTalk()}},{key:"onKeyPress",value:function(e){if(this.selectedTalkHash&&!e.altKey&&!e.ctrlKey&&!e.shiftKey){var t=e.keyCode;27==t&&this.modal.close();var n=38==t?-1:40==t?1:0,r=37==t?-1:39==t?1:0;if(n||r){var i=-1==n?"up":1==n?"down":-1==r?"left":1==r?"right":"",o=this.getSelectedTableModel().findTalk(this.selectedTalkCoords,{rowDelta:n,colDelta:r});o&&(this.selectTalk(o.contents.hash,i),e.preventDefault())}}}}]),e}();n.AgendaView=u},{"./AgendaDayTableModel":1,"./AgendaDayTemplate":2,"./TalkDetailsPopup":4,"./util":9}],4:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("./stringutils"),a=(e("./util"),e("./feedback")),s=function(){function e(t){var n=t.talk,i=t.tagColors;r(this,e),this.talk=n,this.tagColors=i,this.feedback=new a.TalkFeedback(n)}return i(e,[{key:"render",value:function(){var e=this.talk,t='\n      <div class="ka-talk-details-window">\n        <a class="ka-close" title="close"></a>\n        <div class="ka-talk-details-viewport">\n          <div class="ka-talk-details-inner">\n            <div class="ka-talk-details-contents">\n              <h2 class="ka-talk-details-title">'+e.title+" "+this.feedback.renderFeedback()+'</h2>\n              <div class="ka-talk-details-description">'+o.formatMarkdown(e.description)+"</div>\n              "+this.renderTags(e.tags)+'\n              <div class="ka-feedback-entries"></div>\n            </div>\n            <ul class="ka-avatars">\n              '+e.authors.map(this.renderAuthor).join("")+"\n            </ul>\n          </div>\n        </div>\n      </div>\n    ";document.body.insertAdjacentHTML("beforeend",t),document.querySelector(".ka-overlay").classList.remove("ka-hidden"),this.feedback.renderFeedbackEntries(document.querySelector(".ka-feedback-entries"))}},{key:"renderTags",value:function(){var e=this,t=this.talk.tags;return t?'<div class="ka-tags">'+Object.keys(t).map(function(n){return t[n].map(function(t){return'<span class="tag tag'+e.tagColors[n]+'">'+t+"</span>"}).join(" ")}).join(" ")+"</div>":""}},{key:"renderAuthor",value:function(e){var t=(e.id,e.uuid),n=e.name,r=e.avatar,i=e.description;return r=0==r.indexOf("//")?"https:"+r:r,'\n      <li class="ka-avatar-li ka-avatar-and-text">\n        <a href="https://www.koliseo.com/'+t+'" class="ka-avatar-container">\n          <span style="display:table-row">\n            <img class="ka-avatar-img" src="'+r+'">\n            <span class="ka-author-name">'+n+'</a>\n          </span>\n        </a>\n        <div class="ka-author-data">\n          <div class="ka-author-description">'+o.formatMarkdown(i)+"</div>\n        </div>\n      </li>\n    "}}]),e}();n.TalkDetailsPopup=s},{"./feedback":5,"./stringutils":8,"./util":9}],5:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){var t=e.rating,n=e.comment,r=void 0===n?"":n,i=function(e){return'<a data-rating="'+e+'" class="ka-star '+(t>=e?"active":"")+'"></a>'};return'\n    <div class="ka-feedback-form">\n      <div>\n        '+[1,2,3,4,5].map(i).join("")+'\n      </div>\n      <textarea name="comment" class="ka-comment" placeholder="Comment" maxlength="255">'+r+'</textarea>\n      <br>\n      <button class="ka-button" '+(t?"":"disabled")+">Send</button>\n    </div>\n  "},a=function(e){return'\n    <div class="ka-star-rating">\n      <span class="ka-star-bar" style="width: '+e+'%"></span>\n    </div>\n  '},s=function(e){var t=e.rating,n=e.comment,r=e.user;if(Koliseo.auth.currentUser&&r.id===Koliseo.auth.currentUser.id)return"";var i=100*t/5;return'\n    <li class="ka-avatar-li">\n      <div class="ka-entry-details">\n        <a href="https://www.koliseo.com/'+r.uuid+'" class="ka-avatar-container">\n          <img class="ka-avatar-img" src="'+r.avatar+'">\n        </a>\n        <div class="ka-feedback-entry">\n          <span class="ka-author-name">'+r.name+'</span>\n          <div class="ka-star-cell">'+a(i)+"</div>\n          "+(n?"<p>"+n+"</p>":"")+"\n        </div>\n      </div>\n    </li>\n  "},l=function(){function e(t){r(this,e),this.talk=t||{}}return i(e,[{key:"renderFeedback",value:function(){var e=this.talk.feedback&&100*this.talk.feedback.ratingAverage/5||0;return a(e)}},{key:"renderFeedbackEntries",value:function t(e){var n=this,t=function(e){e.innerHTML=void 0,Koliseo.auth.currentUser&&!function(){var t=function r(t){var i=o(t);e.innerHTML=i,Array.prototype.forEach.call(e.querySelectorAll(".ka-star"),function(t){t.onclick=function(t){var n=t.target.dataset.rating;r({rating:n,comment:e.querySelector(".ka-comment").value})}.bind(n)}),e.querySelector(".ka-button").onclick=function(){var r=e.querySelector(".ka-comment").value;Koliseo.auth.sendFeedback({id:n.talk.id,rating:t.rating,comment:r},function(e){console.log("Feedback received!")})}.bind(n)};Koliseo.auth.getCurrentUserFeedbackEntry(n.talk,t)}();var t=e.parentElement.querySelector(".ka-entries");t||(e.insertAdjacentHTML("afterend",'<ul class="ka-entries"></ul>'),t=e.parentElement.querySelector(".ka-entries")),Koliseo.auth.getFeedbackEntries(n.talk.id,void 0,function(e){e.forEach(function(e){t.insertAdjacentHTML("beforeend",s(e))})})}.bind(this);t(e),Koliseo.auth.on("koliseo.login",function(){t(e)}.bind(this)),Koliseo.auth.on("koliseo.logout",function(){t(e)}.bind(this))}}]),e}();n["default"]={TalkFeedback:l},t.exports=n["default"]},{}],6:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=e("./AgendaView"),a=e("./security"),s=e("hellojs"),l=r(s);window.Koliseo=window.Koliseo||{},Koliseo.agenda={},Koliseo.agenda.render=function(e){var t=e.c4pUrl,n=e.agendaUrl,r=e.element,s=e.oauthClientId,u=("www.koliseo.com"!==location.hostname&&"localhost"!==location.hostname,{credentials:"same-origin",mode:"cors",headers:{accept:"application/json"}});l["default"].init({koliseo:s}),Koliseo.auth=new a.Security({c4pUrl:t}),n=n||t+"/agenda",Promise.all([fetch(t,u),fetch(n,u)]).then(function(e){var t=i(e,2),n=t[0],r=t[1];return Promise.all([n.json(),r.json()])}).then(function(e){var t=i(e,2),n=t[0],a=t[1];new o.AgendaView({c4p:n,agenda:a,element:r}).render()})["catch"](function(e){console.log(e)})},n["default"]=Koliseo.agenda,t.exports=n["default"]},{"./AgendaView":3,"./security":7,hellojs:11}],7:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("hellojs"),s=r(a),l="localhost"==location.hostname?"http://localhost:8888/":"https://www.koliseo.com/";s["default"].init({koliseo:{name:"Koliseo",oauth:{version:2,auth:l+"login/auth",grant:l+"login/auth/token",redirect_uri:window.location.href.split("#")[0],display:"page"},scope:{basic:"talks.feedback"},base:l,get:{me:"users/current"},post:{},put:{},del:{},xhr:function(e){var t=e.query.access_token;return delete e.query.access_token,t&&(e.headers={Authorization:"Bearer "+t}),e.headers["content-type"]="application/json",("post"===e.method||"put"===e.method)&&(e.data=JSON.stringify(e.data)),!0}}},{display:"page",default_service:"koliseo"});var u=void 0,c=function(){function e(t){var n=t.c4pUrl;i(this,e),this.c4pUrl=n,s["default"].on("auth.login",function(e){s["default"](e.network).api("me").then(function(e){u=e,s["default"].emit("koliseo.login"),console.log("WTFFFF")})}),s["default"].on("auth.logout",function(e){u=void 0,s["default"].emit("koliseo.logout")})}return o(e,[{key:"on",value:function(e,t){s["default"].on(e,t)}},{key:"off",value:function(e,t){s["default"].off(e,t)}},{key:"login",value:function(){s["default"].login()}},{key:"logout",value:function(){s["default"].logout()}},{key:"sendFeedback",value:function(e,t){var n=e.id,r=e.rating,i=e.comment;s["default"].api(this.c4pUrl+"/proposals/@{id}/feedback","post",{id:n,rating:r,comment:i},t)}},{key:"getFeedbackEntries",value:function(e,t,n){var r=this;s["default"].api(this.c4pUrl+"/proposals/"+e+"/feedback?"+(t?"cursor="+t:""),"get",function(t){n(t.data),t.cursor&&r.getFeedbackEntries(e,t.cursor,n)}.bind(this))}},{key:"getCurrentUserFeedbackEntry",value:function(e,t){var n=e.id;s["default"].api(this.c4pUrl+"/proposals/@{id}/feedback/@{entryId}","get",{id:n,entryId:u.id+"-"+n},t)}},{key:"currentUser",get:function(){return u}}]),e}();n.Security=c},{hellojs:11}],8:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("marked"),o=r(i),a=function(e){return o["default"](e||"")};n.formatMarkdown=a},{marked:61}],9:[function(e,t,n){"use strict";function r(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.removeClass,n=void 0===t?!1:t;return function(e){var t=arguments.length<=1||void 0===arguments[1]?"active":arguments[1];if(n){if(!e.classList.contains(t))return Promise.resolve()}else if(e.classList.contains(t))return Promise.resolve();return new Promise(function(r){var i=function o(t){t.target==e&&(e.removeEventListener("webkitTransitionEnd",o),e.removeEventListener("transitionend",o),r())};e.addEventListener("webkitTransitionEnd",i),e.addEventListener("transitionend",i),requestAnimationFrame(function(r){e.classList[n?"remove":"add"](t)})})}}Object.defineProperty(n,"__esModule",{value:!0});var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};n["default"]={transitionTo:r(),transitionFrom:r({removeClass:!0}),strToEl:function(){var e=document.createElement("div");return function(t){var n;for(e.innerHTML=t,n=e.children[0];e.firstChild;)e.removeChild(e.firstChild);return n}}(),escapeHtml:function(e){return String(e).replace(/[&<>"'\/]/g,function(e){return i[e]})},escapeHtmlTag:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;t>i;i++)r[i-1]=arguments[i];return r=r.map(n.escapeHtml),e.reduce(function(e,t,n){return e+=t+(r[n]||"")},"")},closest:function(e,t){if(e.closest)return e.closest(t);var n=e.matches||e.msMatchesSelector||e.webkitMatchesSelector;do if(1==e.nodeType&&n.call(e,t))return e;while(e=e.parentNode);return void 0},debug:function(){console.log.apply(console,arguments)}},t.exports=n["default"]},{}],10:[function(e,t,n){function r(){c=!1,s.length?u=s.concat(u):d=-1,u.length&&i()}function i(){if(!c){var e=setTimeout(r);c=!0;for(var t=u.length;t;){for(s=u,u=[];++d<t;)s&&s[d].run();d=-1,t=u.length}s=null,c=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function a(){}var s,l=t.exports={},u=[],c=!1,d=-1;l.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new o(e,t)),1!==u.length||c||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=a,l.addListener=a,l.once=a,l.off=a,l.removeListener=a,l.removeAllListeners=a,l.emit=a,l.binding=function(e){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(e){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],11:[function(e,t,n){(function(e){Object.create||(Object.create=function(){function e(){}return function(t){if(1!=arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}()),Object.keys||(Object.keys=function(e,t,n){n=[];for(t in e)n.hasOwnProperty.call(e,t)&&n.push(t);return n}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(e){if(void 0===this||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var r=arguments.length>=2?arguments[1]:void 0,i=0;n>i;i++)i in t&&e.call(r,t[i],i,t);return this}),Array.prototype.filter||(Array.prototype.filter=function(e,t){var n=[];return this.forEach(function(r,i,o){e.call(t||void 0,r,i,o)&&n.push(r)}),n}),Array.prototype.map||(Array.prototype.map=function(e,t){var n=[];return this.forEach(function(r,i,o){n.push(e.call(t||void 0,r,i,o))}),n}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),"object"!=typeof window||"object"!=typeof window.location||window.location.assign||(window.location.assign=function(e){window.location=e}),Function.prototype.bind||(Function.prototype.bind=function(e){function t(){}if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var n=[].slice,r=n.call(arguments,1),i=this,o=function(){return i.apply(this instanceof t?this:e||window,r.concat(n.call(arguments)))};return t.prototype=this.prototype,o.prototype=new t,o});var n=function(e){return n.use(e)};n.utils={extend:function(e){return Array.prototype.slice.call(arguments,1).forEach(function(t){if(e instanceof Object&&t instanceof Object&&e!==t)for(var r in t)e[r]=n.utils.extend(e[r],t[r]);else e=t}),e}},n.utils.extend(n,{settings:{redirect_uri:window.location.href.split("#")[0],response_type:"token",display:"popup",state:"",oauth_proxy:"https://auth-server.herokuapp.com/proxy",timeout:2e4,popup:{resizable:1,scrollbars:1,width:500,height:550},default_service:null,force:null,page_uri:window.location.href},services:{},use:function(e){var t=Object.create(this);return t.settings=Object.create(this.settings),e&&(t.settings.default_service=e),t.utils.Event.call(t),t},init:function(e,t){var n=this.utils;if(!e)return this.services;for(var r in e)e.hasOwnProperty(r)&&"object"!=typeof e[r]&&(e[r]={id:e[r]});n.extend(this.services,e);for(r in this.services)this.services.hasOwnProperty(r)&&(this.services[r].scope=this.services[r].scope||{});return t&&(n.extend(this.settings,t),"redirect_uri"in t&&(this.settings.redirect_uri=n.url(t.redirect_uri).href)),this},login:function(){function e(e,t){n.emit(e,t)}function t(e){return e}function r(e){return!!e}var i,o=this,a=o.utils,s=a.error,l=a.Promise(),u=a.args({network:"s",options:"o",callback:"f"},arguments),c=a.diffKey(u.options,o.settings),d=u.options=a.merge(o.settings,u.options||{});if(d.popup=a.merge(o.settings.popup,u.options.popup||{}),u.network=u.network||o.settings.default_service,l.proxy.then(u.callback,u.callback),l.proxy.then(e.bind(this,"auth.login auth"),e.bind(this,"auth.failed auth")),"string"!=typeof u.network||!(u.network in o.services))return l.reject(s("invalid_network","The provided network was not recognized"));var f=o.services[u.network],p=a.globalEvent(function(e){var t;t=e?JSON.parse(e):s("cancelled","The authentication was not completed"),t.error?l.reject(t):(a.store(t.network,t),l.fulfill({network:t.network,authResponse:t}))}),h=a.url(d.redirect_uri).href,m=f.oauth.response_type||d.response_type;/\bcode\b/.test(m)&&!f.oauth.grant&&(m=m.replace(/\bcode\b/,"token")),u.qs=a.merge(c,{client_id:encodeURIComponent(f.id),response_type:encodeURIComponent(m),redirect_uri:encodeURIComponent(h),display:d.display,scope:"basic",state:{client_id:f.id,network:u.network,display:d.display,callback:p,state:d.state,redirect_uri:h}});var g=a.store(u.network),v=/[,\s]+/,y=(d.scope||"").toString()+","+u.qs.scope;if(g&&"scope"in g&&g.scope instanceof String&&(y+=","+g.scope),y=y.split(v),y=a.unique(y).filter(r),u.qs.state.scope=y.join(","),y=y.map(function(e){if(e in f.scope)return f.scope[e];for(var t in o.services){var n=o.services[t].scope;if(n&&e in n)return""}return e}),y=y.join(",").split(v),y=a.unique(y).filter(r),u.qs.scope=y.join(f.scope_delim||","),d.force===!1&&g&&"access_token"in g&&g.access_token&&"expires"in g&&g.expires>(new Date).getTime()/1e3){var b=a.diff((g.scope||"").split(v),(u.qs.state.scope||"").split(v));if(0===b.length)return l.fulfill({unchanged:!0,network:u.network,authResponse:g}),l}if("page"===d.display&&d.page_uri&&(u.qs.state.page_uri=a.url(d.page_uri).href),"login"in f&&"function"==typeof f.login&&f.login(u),(!/\btoken\b/.test(m)||parseInt(f.oauth.version,10)<2||"none"===d.display&&f.oauth.grant&&g&&g.refresh_token)&&(u.qs.state.oauth=f.oauth,u.qs.state.oauth_proxy=d.oauth_proxy),u.qs.state=encodeURIComponent(JSON.stringify(u.qs.state)),1===parseInt(f.oauth.version,10)?i=a.qs(d.oauth_proxy,u.qs,t):"none"===d.display&&f.oauth.grant&&g&&g.refresh_token?(u.qs.refresh_token=g.refresh_token,i=a.qs(d.oauth_proxy,u.qs,t)):i=a.qs(f.oauth.auth,u.qs,t),"none"===d.display)a.iframe(i,h);else if("popup"===d.display)var k=a.popup(i,h,d.popup),w=setInterval(function(){if((!k||k.closed)&&(clearInterval(w),!l.state)){var e=s("cancelled","Login has been cancelled");k||(e=s("blocked","Popup was blocked")),e.network=u.network,l.reject(e)}},100);else window.location=i;return l.proxy},logout:function(){function e(e,t){n.emit(e,t)}var t=this,r=t.utils,i=r.error,o=r.Promise(),a=r.args({name:"s",options:"o",callback:"f"},arguments);if(a.options=a.options||{},o.proxy.then(a.callback,a.callback),o.proxy.then(e.bind(this,"auth.logout auth"),e.bind(this,"error")),a.name=a.name||this.settings.default_service,a.authResponse=r.store(a.name),!a.name||a.name in t.services)if(a.name&&a.authResponse){var s=function(e){r.store(a.name,""),o.fulfill(n.utils.merge({network:a.name},e||{}))},l={};if(a.options.force){var u=t.services[a.name].logout;if(u)if("function"==typeof u&&(u=u(s,a)),"string"==typeof u)r.iframe(u),l.force=null,l.message="Logout success on providers site was indeterminate";else if(void 0===u)return o.proxy}s(l)}else o.reject(i("invalid_session","There was no session to remove"));else o.reject(i("invalid_network","The network was unrecognized"));return o.proxy},getAuthResponse:function(e){return e=e||this.settings.default_service,e&&e in this.services?this.utils.store(e)||null:null},events:{}}),n.utils.extend(n.utils,{error:function(e,t){return{error:{code:e,message:t}}},qs:function(e,t,n){if(t){n=n||encodeURIComponent;for(var r in t){var i="([\\?\\&])"+r+"=[^\\&]*";reg=new RegExp(i),e.match(reg)&&(e=e.replace(reg,"$1"+r+"="+n(t[r])),delete t[r])}}return this.isEmpty(t)?e:e+(e.indexOf("?")>-1?"&":"?")+this.param(t,n)},param:function(e,t){var n,r,i={};if("string"==typeof e){if(t=t||decodeURIComponent,r=e.replace(/^[\#\?]/,"").match(/([^=\/\&]+)=([^\&]+)/g))for(var o=0;o<r.length;o++)n=r[o].match(/([^=]+)=(.*)/),i[n[1]]=t(n[2]);return i}t=t||encodeURIComponent;var a=e;i=[];for(var s in a)a.hasOwnProperty(s)&&a.hasOwnProperty(s)&&i.push([s,"?"===a[s]?"?":t(a[s])].join("="));return i.join("&")},store:function(){function e(){var e={};try{e=JSON.parse(n.getItem("hello"))||{}}catch(t){}return e}function t(e){n.setItem("hello",JSON.stringify(e))}for(var n,r=["localStorage","sessionStorage"],i=-1,o="test";r[++i];)try{n=window[r[i]],n.setItem(o+i,i),n.removeItem(o+i);break}catch(a){n=null}if(!n){var s=null;n={getItem:function(e){e+="=";for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var r=t[n].replace(/(^\s+|\s+$)/,"");if(r&&0===r.indexOf(e))return r.substr(e.length)}return s},setItem:function(e,t){s=t,document.cookie=e+"="+t}},s=n.getItem("hello")}return function(n,r,i){var o=e();if(n&&void 0===r)return o[n]||null;if(n&&null===r)try{delete o[n]}catch(a){o[n]=null}else{if(!n)return o;o[n]=r}return t(o),o||null}}(),append:function(e,t,n){var r="string"==typeof e?document.createElement(e):e;if("object"==typeof t)if("tagName"in t)n=t;else for(var i in t)if(t.hasOwnProperty(i))if("object"==typeof t[i])for(var o in t[i])t[i].hasOwnProperty(o)&&(r[i][o]=t[i][o]);else"html"===i?r.innerHTML=t[i]:/^on/.test(i)?r[i]=t[i]:r.setAttribute(i,t[i]);return"body"===n?!function a(){document.body?document.body.appendChild(r):setTimeout(a,16)}():"object"==typeof n?n.appendChild(r):"string"==typeof n&&document.getElementsByTagName(n)[0].appendChild(r),r},iframe:function(e){this.append("iframe",{src:e,style:{position:"absolute",left:"-1000px",bottom:0,height:"1px",width:"1px"}},"body")},merge:function(){var e=Array.prototype.slice.call(arguments);return e.unshift({}),this.extend.apply(null,e)},args:function(e,t){var n={},r=0,i=null,o=null;for(o in e)if(e.hasOwnProperty(o))break;if(1===t.length&&"object"==typeof t[0]&&"o!"!=e[o])for(o in t[0])if(e.hasOwnProperty(o)&&o in e)return t[0];
for(o in e)if(e.hasOwnProperty(o))if(i=typeof t[r],"function"==typeof e[o]&&e[o].test(t[r])||"string"==typeof e[o]&&(e[o].indexOf("s")>-1&&"string"===i||e[o].indexOf("o")>-1&&"object"===i||e[o].indexOf("i")>-1&&"number"===i||e[o].indexOf("a")>-1&&"object"===i||e[o].indexOf("f")>-1&&"function"===i))n[o]=t[r++];else if("string"==typeof e[o]&&e[o].indexOf("!")>-1)return!1;return n},url:function(e){if(e){if(window.URL&&URL instanceof Function&&0!==URL.length)return new URL(e,window.location);var t=document.createElement("a");return t.href=e,t}return window.location},diff:function(e,t){return t.filter(function(t){return-1===e.indexOf(t)})},diffKey:function(e,t){if(e||!t){var n={};for(var r in e)r in t||(n[r]=e[r]);return n}return e},unique:function(e){return Array.isArray(e)?e.filter(function(t,n){return e.indexOf(t)===n}):[]},isEmpty:function(e){if(!e)return!0;if(Array.isArray(e))return!e.length;if("object"==typeof e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},Promise:function(){var t=0,n=1,r=2,i=function(e){return this instanceof i?(this.id="Thenable/1.0.6",this.state=t,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},void("function"==typeof e&&e.call(this,this.fulfill.bind(this),this.reject.bind(this)))):new i(e)};i.prototype={fulfill:function(e){return o(this,n,"fulfillValue",e)},reject:function(e){return o(this,r,"rejectReason",e)},then:function(e,t){var n=this,r=new i;return n.onFulfilled.push(l(e,r,"fulfill")),n.onRejected.push(l(t,r,"reject")),a(n),r.proxy}};var o=function(e,n,r,i){return e.state===t&&(e.state=n,e[r]=i,a(e)),e},a=function(e){e.state===n?s(e,"onFulfilled",e.fulfillValue):e.state===r&&s(e,"onRejected",e.rejectReason)},s=function(t,n,r){if(0!==t[n].length){var i=t[n];t[n]=[];var o=function(){for(var e=0;e<i.length;e++)i[e](r)};"object"==typeof e&&"function"==typeof e.nextTick?e.nextTick(o):"function"==typeof setImmediate?setImmediate(o):setTimeout(o,0)}},l=function(e,t,n){return function(r){if("function"!=typeof e)t[n].call(t,r);else{var i;try{i=e(r)}catch(o){return void t.reject(o)}u(t,i)}}},u=function(e,t){if(e===t||e.proxy===t)return void e.reject(new TypeError("cannot resolve promise with itself"));var n;if("object"==typeof t&&null!==t||"function"==typeof t)try{n=t.then}catch(r){return void e.reject(r)}if("function"!=typeof n)e.fulfill(t);else{var i=!1;try{n.call(t,function(n){i||(i=!0,n===t?e.reject(new TypeError("circular thenable chain")):u(e,n))},function(t){i||(i=!0,e.reject(t))})}catch(r){i||e.reject(r)}}};return i}(),Event:function(){var e=/[\s\,]+/;return this.parent={events:this.events,findEvents:this.findEvents,parent:this.parent,utils:this.utils},this.events={},this.on=function(t,n){if(n&&"function"==typeof n)for(var r=t.split(e),i=0;i<r.length;i++)this.events[r[i]]=[n].concat(this.events[r[i]]||[]);return this},this.off=function(e,t){return this.findEvents(e,function(e,n){t&&this.events[e][n]!==t||(this.events[e][n]=null)}),this},this.emit=function(e){var t=Array.prototype.slice.call(arguments,1);t.push(e);for(var n=function(n,r){t[t.length-1]="*"===n?e:n,this.events[n][r].apply(this,t)},r=this;r&&r.findEvents;)r.findEvents(e+",*",n),r=r.parent;return this},this.emitAfter=function(){var e=this,t=arguments;return setTimeout(function(){e.emit.apply(e,t)},0),this},this.findEvents=function(t,n){var r=t.split(e);for(var i in this.events)if(this.events.hasOwnProperty(i)&&r.indexOf(i)>-1)for(var o=0;o<this.events[i].length;o++)this.events[i][o]&&n.call(this,i,o)},this},globalEvent:function(e,t){return t=t||"_hellojs_"+parseInt(1e12*Math.random(),10).toString(36),window[t]=function(){try{e.apply(this,arguments)&&delete window[t]}catch(n){console.error(n)}},t},popup:function(e,t,r){var i=document.documentElement;if(r.height){var o=void 0!==window.screenTop?window.screenTop:screen.top,a=screen.height||window.innerHeight||i.clientHeight;r.top=parseInt((a-r.height)/2,10)+o}if(r.width){var s=void 0!==window.screenLeft?window.screenLeft:screen.left,l=screen.width||window.innerWidth||i.clientWidth;r.left=parseInt((l-r.width)/2,10)+s}var u=[];Object.keys(r).forEach(function(e){var t=r[e];u.push(e+(null!==t?"="+t:""))});var c=function(e){var r=window.open(e,"_blank",u.join(","));try{if(r&&r.addEventListener){var i=n.utils.url(t),o=i.origin||i.protocol+"//"+i.hostname;r.addEventListener("loadstart",function(e){var t=e.url;if(0===t.indexOf(o)){var i=n.utils.url(t),a={location:{assign:function(e){r.addEventListener("exit",function(){setTimeout(function(){c(e)},1e3)})},search:i.search,hash:i.hash,href:i.href},close:function(){r.close&&r.close()}};n.utils.responseHandler(a,window),a.close()}})}}catch(a){}return r&&r.focus&&r.focus(),r};return-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")&&(e=t+"#oauth_redirect="+encodeURIComponent(encodeURIComponent(e))),c(e)},responseHandler:function(e,t){function n(e,t,n){var i=e.callback,a=e.network;if(o.store(a,e),!("display"in e&&"page"===e.display)){if(n&&i&&i in n){try{delete e.callback}catch(s){}o.store(a,e);var l=JSON.stringify(e);try{n[i](l)}catch(s){}}r()}}function r(){try{e.close()}catch(t){}e.addEventListener&&e.addEventListener("load",function(){e.close()})}var i,o=this,a=e.location;if(i=o.param(a.search),i&&i.state&&(i.code||i.oauth_token)){var s=JSON.parse(i.state);i.redirect_uri=s.redirect_uri||a.href.replace(/[\?\#].*$/,"");var l=s.oauth_proxy+"?"+o.param(i);return void a.assign(l)}if(i=o.merge(o.param(a.search||""),o.param(a.hash||"")),i&&"state"in i){try{var u=JSON.parse(i.state);o.extend(i,u)}catch(c){console.error("Could not decode state parameter")}if("access_token"in i&&i.access_token&&i.network)i.expires_in&&0!==parseInt(i.expires_in,10)||(i.expires_in=0),i.expires_in=parseInt(i.expires_in,10),i.expires=(new Date).getTime()/1e3+(i.expires_in||31536e3),n(i,e,t);else if("error"in i&&i.error&&i.network)i.error={code:i.error,message:i.error_message||i.error_description},n(i,e,t);else if(i.callback&&i.callback in t){var d="result"in i&&i.result?JSON.parse(i.result):!1;t[i.callback](d),r()}i.page_uri&&a.assign(i.page_uri)}else if("oauth_redirect"in i)return void a.assign(decodeURIComponent(i.oauth_redirect))}}),n.utils.Event.call(n),n.utils.responseHandler(window,window.opener||window.parent),function(e){var t={},n={};e.on("auth.login, auth.logout",function(n){n&&"object"==typeof n&&n.network&&(t[n.network]=e.utils.store(n.network)||{})}),function r(){var i=(new Date).getTime()/1e3,o=function(t){e.emit("auth."+t,{network:a,authResponse:s})};for(var a in e.services)if(e.services.hasOwnProperty(a)){if(!e.services[a].id)continue;var s=e.utils.store(a)||{},l=e.services[a],u=t[a]||{};if(s&&"callback"in s){var c=s.callback;try{delete s.callback}catch(d){}e.utils.store(a,s);try{window[c](s)}catch(d){}}if(s&&"expires"in s&&s.expires<i){var f=l.refresh||s.refresh_token;!f||a in n&&!(n[a]<i)?f||a in n||(o("expired"),n[a]=!0):(e.emit("notice",a+" has expired trying to resignin"),e.login(a,{display:"none",force:!1}),n[a]=i+600);continue}if(u.access_token===s.access_token&&u.expires===s.expires)continue;!s.access_token&&u.access_token?o("logout"):s.access_token&&!u.access_token?o("login"):s.expires!==u.expires&&o("update"),t[a]=s,a in n&&delete n[a]}setTimeout(r,1e3)}()}(n),n.api=function(){function e(e){e=e.replace(/\@\{([a-z\_\-]+)(\|.*?)?\}/gi,function(e,t,n){var a=n?n.replace(/^\|/,""):"";return t in o.query?(a=o.query[t],delete o.query[t]):o.data&&t in o.data?(a=o.data[t],delete o.data[t]):n||i.reject(r("missing_attribute","The attribute "+t+" is missing from the request")),a}),e.match(/^https?:\/\//)||(e=u.base+e),o.url=e,n.request(o,function(e,t){if(!o.formatResponse)return void(("object"==typeof t?t.statusCode>=400:"object"==typeof e&&"error"in e)?i.reject(e):i.fulfill(e));if(e===!0?e={success:!0}:e||(e={}),"delete"===o.method&&(e=!e||n.isEmpty(e)?{success:!0}:e),u.wrap&&(o.path in u.wrap||"default"in u.wrap)){var r=o.path in u.wrap?o.path:"default",a=((new Date).getTime(),u.wrap[r](e,t,o));a&&(e=a)}e&&"paging"in e&&e.paging.next&&("?"===e.paging.next[0]?e.paging.next=o.path+e.paging.next:e.paging.next+="#"+o.path),!e||"error"in e?i.reject(e):i.fulfill(e)})}var t=this,n=t.utils,r=n.error,i=n.Promise(),o=n.args({path:"s!",query:"o",method:"s",data:"o",timeout:"i",callback:"f"},arguments);o.method=(o.method||"get").toLowerCase(),o.headers=o.headers||{},o.query=o.query||{},("get"===o.method||"delete"===o.method)&&(n.extend(o.query,o.data),o.data={});var a=o.data=o.data||{};if(i.then(o.callback,o.callback),!o.path)return i.reject(r("invalid_path","Missing the path parameter from the request"));o.path=o.path.replace(/^\/+/,"");var s=(o.path.split(/[\/\:]/,2)||[])[0].toLowerCase();if(s in t.services){o.network=s;var l=new RegExp("^"+s+":?/?");o.path=o.path.replace(l,"")}o.network=t.settings.default_service=o.network||t.settings.default_service;var u=t.services[o.network];if(!u)return i.reject(r("invalid_network","Could not match the service requested: "+o.network));if(o.method in u&&o.path in u[o.method]&&u[o.method][o.path]===!1)return i.reject(r("invalid_path","The provided path is not available on the selected network"));o.oauth_proxy||(o.oauth_proxy=t.settings.oauth_proxy),"proxy"in o||(o.proxy=o.oauth_proxy&&u.oauth&&1===parseInt(u.oauth.version,10)),"timeout"in o||(o.timeout=t.settings.timeout),"formatResponse"in o||(o.formatResponse=!0),o.authResponse=t.getAuthResponse(o.network),o.authResponse&&o.authResponse.access_token&&(o.query.access_token=o.authResponse.access_token);var c,d=o.path;o.options=n.clone(o.query),o.data=n.clone(a);var f=u[{"delete":"del"}[o.method]||o.method]||{};if("get"===o.method){var p=d.split(/[\?#]/)[1];p&&(n.extend(o.query,n.param(p)),d=d.replace(/\?.*?(#|$)/,"$1"))}return(c=d.match(/#(.+)/,""))?(d=d.split("#")[0],o.path=c[1]):d in f?(o.path=d,d=f[d]):"default"in f&&(d=f["default"]),o.redirect_uri=t.settings.redirect_uri,o.xhr=u.xhr,o.jsonp=u.jsonp,o.form=u.form,"function"==typeof d?d(o,e):e(d),i.proxy},n.utils.extend(n.utils,{request:function(e,t){function n(e,t){var n;e.authResponse&&e.authResponse.oauth&&1===parseInt(e.authResponse.oauth.version,10)&&(n=e.query.access_token,delete e.query.access_token,e.proxy=!0),!e.data||"get"!==e.method&&"delete"!==e.method||(r.extend(e.query,e.data),e.data=null);var i=r.qs(e.url,e.query);e.proxy&&(i=r.qs(e.oauth_proxy,{path:i,access_token:n||"",then:e.proxy_response_type||("get"===e.method.toLowerCase()?"redirect":"proxy"),method:e.method.toLowerCase(),suppress_response_codes:!0})),t(i)}var r=this,i=r.error;r.isEmpty(e.data)||"FileList"in window||!r.hasBinary(e.data)||(e.xhr=!1,e.jsonp=!1);var o=this.request_cors(function(){return void 0===e.xhr||e.xhr&&("function"!=typeof e.xhr||e.xhr(e,e.query))});if(o)return void n(e,function(n){var i=r.xhr(e.method,n,e.headers,e.data,t);i.onprogress=e.onprogress||null,i.upload&&e.onuploadprogress&&(i.upload.onprogress=e.onuploadprogress)});var a=e.query;if(e.query=r.clone(e.query),e.callbackID=r.globalEvent(),e.jsonp!==!1){if(e.query.callback=e.callbackID,"function"==typeof e.jsonp&&e.jsonp(e,e.query),"get"===e.method)return void n(e,function(n){r.jsonp(n,t,e.callbackID,e.timeout)});e.query=a}if(e.form!==!1){e.query.redirect_uri=e.redirect_uri,e.query.state=JSON.stringify({callback:e.callbackID});var s;if("function"==typeof e.form&&(s=e.form(e,e.query)),"post"===e.method&&s!==!1)return void n(e,function(n){r.post(n,e.data,s,t,e.callbackID,e.timeout)})}t(i("invalid_request","There was no mechanism for handling this request"))},request_cors:function(e){return"withCredentials"in new XMLHttpRequest&&e()},domInstance:function(e,t){var n="HTML"+(e||"").replace(/^[a-z]/,function(e){return e.toUpperCase()})+"Element";return t?window[n]?t instanceof window[n]:window.Element?t instanceof window.Element&&(!e||t.tagName&&t.tagName.toLowerCase()===e):!(t instanceof Object||t instanceof Array||t instanceof String||t instanceof Number)&&t.tagName&&t.tagName.toLowerCase()===e:!1},clone:function(e){if(null===e||"object"!=typeof e||e instanceof Date||"nodeName"in e||this.isBinary(e))return e;if(Array.isArray(e))return e.map(this.clone.bind(this));var t={};for(var n in e)t[n]=this.clone(e[n]);return t},xhr:function(e,t,n,r,i){function o(e){for(var t,n={},r=/([a-z\-]+):\s?(.*);?/gi;t=r.exec(e);)n[t[1]]=t[2];return n}var a=new XMLHttpRequest,s=this.error,l=!1;"blob"===e&&(l=e,e="GET"),e=e.toUpperCase(),a.onload=function(t){var n=a.response;try{n=JSON.parse(a.responseText)}catch(r){401===a.status&&(n=s("access_denied",a.statusText))}var l=o(a.getAllResponseHeaders());l.statusCode=a.status,i(n||("GET"===e?s("empty_response","Could not get resource"):{}),l)},a.onerror=function(e){var t=a.responseText;try{t=JSON.parse(a.responseText)}catch(n){}i(t||s("access_denied","Could not get resource"))};var u;if("GET"===e||"DELETE"===e)r=null;else if(r&&"string"!=typeof r&&!(r instanceof FormData)&&!(r instanceof File)&&!(r instanceof Blob)){var c=new FormData;for(u in r)r.hasOwnProperty(u)&&(r[u]instanceof HTMLInputElement?"files"in r[u]&&r[u].files.length>0&&c.append(u,r[u].files[0]):r[u]instanceof Blob?c.append(u,r[u],r.name):c.append(u,r[u]));r=c}if(a.open(e,t,!0),l&&("responseType"in a?a.responseType=l:a.overrideMimeType("text/plain; charset=x-user-defined")),n)for(u in n)a.setRequestHeader(u,n[u]);return a.send(r),a},jsonp:function(e,t,n,r){var i,o=this,a=o.error,s=0,l=document.getElementsByTagName("head")[0],u=a("server_error","server_error"),c=function(){s++||window.setTimeout(function(){t(u),l.removeChild(d)},0)};n=o.globalEvent(function(e){return u=e,!0},n),e=e.replace(new RegExp("=\\?(&|$)"),"="+n+"$1");var d=o.append("script",{id:n,name:n,src:e,async:!0,onload:c,onerror:c,onreadystatechange:function(){/loaded|complete/i.test(this.readyState)&&c()}});window.navigator.userAgent.toLowerCase().indexOf("opera")>-1&&(i=o.append("script",{text:"document.getElementById('"+callbackId+"').onerror();"}),d.async=!1),r&&window.setTimeout(function(){u=a("timeout","timeout"),c()},r),l.appendChild(d),i&&l.appendChild(i)},post:function(e,t,n,r,i,o){var a,s=this,l=s.error,u=document,c=null,d=[],f=0,p=null,h=0,m=function(e){h++||r(e)};s.globalEvent(m,i);var g;try{g=u.createElement('<iframe name="'+i+'">')}catch(v){g=u.createElement("iframe")}if(g.name=i,g.id=i,g.style.display="none",n&&n.callbackonload&&(g.onload=function(){m({response:"posted",message:"Content was posted"})}),o&&setTimeout(function(){m(l("timeout","The post operation timed out"))},o),u.body.appendChild(g),s.domInstance("form",t)){for(c=t.form,f=0;f<c.elements.length;f++)c.elements[f]!==t&&c.elements[f].setAttribute("disabled",!0);t=c}if(s.domInstance("form",t))for(c=t,f=0;f<c.elements.length;f++)c.elements[f].disabled||"file"!==c.elements[f].type||(c.encoding=c.enctype="multipart/form-data",c.elements[f].setAttribute("name","file"));else{for(p in t)t.hasOwnProperty(p)&&s.domInstance("input",t[p])&&"file"===t[p].type&&(c=t[p].form,c.encoding=c.enctype="multipart/form-data");c||(c=u.createElement("form"),u.body.appendChild(c),a=c);var y;for(p in t)if(t.hasOwnProperty(p)){var b=s.domInstance("input",t[p])||s.domInstance("textArea",t[p])||s.domInstance("select",t[p]);if(b&&t[p].form===c)b&&t[p].name!==p&&(t[p].setAttribute("name",p),t[p].name=p);else{var k=c.elements[p];if(y)for(k instanceof NodeList||(k=[k]),f=0;f<k.length;f++)k[f].parentNode.removeChild(k[f]);y=u.createElement("input"),y.setAttribute("type","hidden"),y.setAttribute("name",p),b?y.value=t[p].value:s.domInstance(null,t[p])?y.value=t[p].innerHTML||t[p].innerText:y.value=t[p],c.appendChild(y)}}for(f=0;f<c.elements.length;f++)y=c.elements[f],y.name in t||y.getAttribute("disabled")===!0||(y.setAttribute("disabled",!0),d.push(y))}c.setAttribute("method","POST"),c.setAttribute("target",i),c.target=i,c.setAttribute("action",e),setTimeout(function(){c.submit(),setTimeout(function(){try{a&&a.parentNode.removeChild(a)}catch(e){try{console.error("HelloJS: could not remove iframe")}catch(t){}}for(var n=0;n<d.length;n++)d[n]&&(d[n].setAttribute("disabled",!1),d[n].disabled=!1)},0)},100)},hasBinary:function(e){for(var t in e)if(e.hasOwnProperty(t)&&this.isBinary(e[t]))return!0;return!1},isBinary:function(e){return e instanceof Object&&(this.domInstance("input",e)&&"file"===e.type||"FileList"in window&&e instanceof window.FileList||"File"in window&&e instanceof window.File||"Blob"in window&&e instanceof window.Blob)},toBlob:function(e){var t=/^data\:([^;,]+(\;charset=[^;,]+)?)(\;base64)?,/i,n=e.match(t);if(!n)return e;for(var r=atob(e.replace(t,"")),i=[],o=0;o<r.length;o++)i.push(r.charCodeAt(o));return new Blob([new Uint8Array(i)],{type:n[1]})}}),function(e){var t=e.api,n=e.utils;n.extend(n,{dataToJSON:function(e){var t=this,n=window,r=e.data;if(t.domInstance("form",r)?r=t.nodeListToJSON(r.elements):"NodeList"in n&&r instanceof NodeList?r=t.nodeListToJSON(r):t.domInstance("input",r)&&(r=t.nodeListToJSON([r])),("File"in n&&r instanceof n.File||"Blob"in n&&r instanceof n.Blob||"FileList"in n&&r instanceof n.FileList)&&(r={file:r}),!("FormData"in n&&r instanceof n.FormData))for(var i in r)if(r.hasOwnProperty(i))if("FileList"in n&&r[i]instanceof n.FileList)1===r[i].length&&(r[i]=r[i][0]);else{if(t.domInstance("input",r[i])&&"file"===r[i].type)continue;t.domInstance("input",r[i])||t.domInstance("select",r[i])||t.domInstance("textArea",r[i])?r[i]=r[i].value:t.domInstance(null,r[i])&&(r[i]=r[i].innerHTML||r[i].innerText)}return e.data=r,r},nodeListToJSON:function(e){for(var t={},n=0;n<e.length;n++){var r=e[n];!r.disabled&&r.name&&("file"===r.type?t[r.name]=r:t[r.name]=r.value||r.innerHTML)}return t}}),e.api=function(){var e=n.args({path:"s!",method:"s",data:"o",timeout:"i",callback:"f"},arguments);return e.data&&n.dataToJSON(e),t.call(this,e)}}(n),"object"==typeof chrome&&"object"==typeof chrome.identity&&chrome.identity.launchWebAuthFlow&&!function(){function e(t,r){var i={closed:!1};return chrome.identity.launchWebAuthFlow({url:t,interactive:r},function(t){if(void 0===t)return void(i.closed=!0);var r=n.utils.url(t),o={location:{assign:function(t){e(t,!1)},search:r.search,hash:r.hash,href:r.href},close:function(){}};n.utils.responseHandler(o,window)}),i}n.utils.popup=function(t){return e(t,!0)},n.utils.iframe=function(t){e(t,!1)},n.utils.request_cors=function(e){return e(),!0};var t={};chrome.storage.local.get("hello",function(e){t=e.hello}),n.utils.store=function(e,n){return 0===arguments.length?t:1===arguments.length?t[e]||null:n?(t[e]=n,chrome.storage.local.set({hello:t}),n):null===n?(delete t[e],chrome.storage.local.set({hello:t}),null):void 0}}(),function(e){function t(e){e&&"error"in e&&(e.error={code:"server_error",message:e.error.message||e.error})}function n(t,n,r){if(!("object"!=typeof t||"undefined"!=typeof Blob&&t instanceof Blob||"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer||"error"in t)){var i=("app_folder"!==t.root?t.root:"")+t.path.replace(/\&/g,"%26");i=i.replace(/^\//,""),t.thumb_exists&&(t.thumbnail=r.oauth_proxy+"?path="+encodeURIComponent("https://api-content.dropbox.com/1/thumbnails/auto/"+i+"?format=jpeg&size=m")+"&access_token="+r.options.access_token),t.type=t.is_dir?"folder":t.mime_type,t.name=t.path.replace(/.*\//g,""),t.is_dir?t.files=i.replace(/^\//,""):(t.downloadLink=e.settings.oauth_proxy+"?path="+encodeURIComponent("https://api-content.dropbox.com/1/files/auto/"+i)+"&access_token="+r.options.access_token,t.file="https://api-content.dropbox.com/1/files/auto/"+i),t.id||(t.id=t.path.replace(/^\//,""))}}function r(e){return function(t,n){delete t.query.limit,n(e)}}var i={version:"1.0",auth:"https://www.dropbox.com/1/oauth/authorize",request:"https://api.dropbox.com/1/oauth/request_token",token:"https://api.dropbox.com/1/oauth/access_token"},o={version:2,auth:"https://www.dropbox.com/1/oauth2/authorize",grant:"https://api.dropbox.com/1/oauth2/token"};e.init({dropbox:{name:"Dropbox",oauth:o,login:function(t){t.qs.scope="",delete t.qs.display;var n=decodeURIComponent(t.qs.redirect_uri);0===n.indexOf("http:")&&0!==n.indexOf("http://localhost/")?e.services.dropbox.oauth=i:e.services.dropbox.oauth=o,t.options.popup.width=1e3,t.options.popup.height=1e3},base:"https://api.dropbox.com/1/",root:"sandbox",get:{me:"account/info","me/files":r("metadata/auto/@{parent|}"),"me/folder":r("metadata/auto/@{id}"),"me/folders":r("metadata/auto/"),"default":function(e,t){e.path.match("https://api-content.dropbox.com/1/files/")&&(e.method="blob"),t(e.path)}},post:{"me/files":function(t,n){var r=t.data.parent,i=t.data.name;t.data={file:t.data.file},"string"==typeof t.data.file&&(t.data.file=e.utils.toBlob(t.data.file)),n("https://api-content.dropbox.com/1/files_put/auto/"+r+"/"+i)},"me/folders":function(t,n){var r=t.data.name;t.data={},n("fileops/create_folder?root=@{root|sandbox}&"+e.utils.param({path:r}))}},del:{"me/files":"fileops/delete?root=@{root|sandbox}&path=@{id}","me/folder":"fileops/delete?root=@{root|sandbox}&path=@{id}"},wrap:{me:function(e){if(t(e),!e.uid)return e;e.name=e.display_name;var n=e.name.split(" ");return e.first_name=n.shift(),e.last_name=n.join(" "),e.id=e.uid,delete e.uid,delete e.display_name,e},"default":function(e,r,i){return t(e),e.is_dir&&e.contents&&(e.data=e.contents,delete e.contents,e.data.forEach(function(t){t.root=e.root,n(t,r,i)})),n(e,r,i),e.is_deleted&&(e.success=!0),e}},xhr:function(e){if(e.data&&e.data.file){var t=e.data.file;t&&(t.files?e.data=t.files[0]:e.data=t)}return"delete"===e.method&&(e.method="post"),!0},form:function(e,t){delete t.state,delete t.redirect_uri}}})}(n),function(e){function t(e){return e.id&&(e.thumbnail=e.picture="https://graph.facebook.com/"+e.id+"/picture"),e}function n(e){return"data"in e&&e.data.forEach(t),e}function r(e,t,n){if("boolean"==typeof e&&(e={success:e}),e&&"data"in e){var r=n.query.access_token;e.data.forEach(function(e){e.picture&&(e.thumbnail=e.picture),e.pictures=(e.images||[]).sort(function(e,t){return e.width-t.width}),e.cover_photo&&e.cover_photo.id&&(e.thumbnail=i+e.cover_photo.id+"/picture?access_token="+r),"album"===e.type&&(e.files=e.photos=i+e.id+"/photos"),e.can_upload&&(e.upload_location=i+e.id+"/photos")})}return e}e.init({facebook:{name:"Facebook",oauth:{version:2,auth:"https://www.facebook.com/dialog/oauth/",grant:"https://graph.facebook.com/oauth/access_token"},scope:{basic:"public_profile",email:"email",share:"user_posts",birthday:"user_birthday",events:"user_events",photos:"user_photos,user_videos",videos:"user_photos,user_videos",friends:"user_friends",files:"user_photos,user_videos",publish_files:"user_photos,user_videos,publish_actions",publish:"publish_actions",offline_access:"offline_access"},refresh:!0,login:function(e){e.options.force&&(e.qs.auth_type="reauthenticate"),e.options.popup.width=580,e.options.popup.height=400},logout:function(t,n){var r=e.utils.globalEvent(t),i=encodeURIComponent(e.settings.redirect_uri+"?"+e.utils.param({callback:r,result:JSON.stringify({force:!0}),state:"{}"})),o=(n.authResponse||{}).access_token;return e.utils.iframe("https://www.facebook.com/logout.php?next="+i+"&access_token="+o),o?void 0:!1},base:"https://graph.facebook.com/v2.4/",get:{me:"me?fields=email,first_name,last_name,name,timezone,verified","me/friends":"me/friends","me/following":"me/friends","me/followers":"me/friends","me/share":"me/feed","me/like":"me/likes","me/files":"me/albums","me/albums":"me/albums?fields=cover_photo,name","me/album":"@{id}/photos?fields=picture","me/photos":"me/photos","me/photo":"@{id}","friend/albums":"@{id}/albums","friend/photos":"@{id}/photos"},post:{"me/share":"me/feed","me/photo":"@{id}"},wrap:{me:t,"me/friends":n,"me/following":n,"me/followers":n,"me/albums":r,"me/photos":r,"me/files":r,"default":r},xhr:function(t,n){return("get"===t.method||"post"===t.method)&&(n.suppress_response_codes=!0),"post"===t.method&&t.data&&"string"==typeof t.data.file&&(t.data.file=e.utils.toBlob(t.data.file)),!0},jsonp:function(t,n){var r=t.method;"get"===r||e.utils.hasBinary(t.data)?"delete"===t.method&&(n.method="delete",t.method="post"):(t.data.method=r,t.method="get")},form:function(e){return{callbackonload:!0}}}});var i="https://graph.facebook.com/"}(n),function(e){function t(t,n,r){var i=(r?"":"flickr:")+"?method="+t+"&api_key="+e.services.flickr.id+"&format=json";for(var o in n)n.hasOwnProperty(o)&&(i+="&"+o+"="+n[o]);return i}function n(t){var n=e.getAuthResponse("flickr");t(n&&n.user_nsid?n.user_nsid:null)}function r(e,r){return r||(r={}),function(i,o){n(function(n){r.user_id=n,o(t(e,r,!0))})}}function i(e,t){var n="https://www.flickr.com/images/buddyicon.gif";return e.nsid&&e.iconserver&&e.iconfarm&&(n="https://farm"+e.iconfarm+".staticflickr.com/"+e.iconserver+"/buddyicons/"+e.nsid+(t?"_"+t:"")+".jpg"),n}function o(e,t,n,r,i){return i=i?"_"+i:"","https://farm"+t+".staticflickr.com/"+n+"/"+e+"_"+r+i+".jpg"}function a(e){e&&e.stat&&"ok"!=e.stat.toLowerCase()&&(e.error={code:"invalid_request",message:e.message})}function s(e){if(e.photoset||e.photos){var t="photoset"in e?"photoset":"photos";e=u(e,t),d(e),e.data=e.photo,delete e.photo;for(var n=0;n<e.data.length;n++){var r=e.data[n];r.name=r.title,r.picture=o(r.id,r.farm,r.server,r.secret,""),r.pictures=l(r.id,r.farm,r.server,r.secret),r.source=o(r.id,r.farm,r.server,r.secret,"b"),r.thumbnail=o(r.id,r.farm,r.server,r.secret,"m")}}return e}function l(e,t,n,r){var i=2048,a=[{id:"t",max:100},{id:"m",max:240},{id:"n",max:320},{id:"",max:500},{id:"z",max:640},{id:"c",max:800},{id:"b",max:1024},{id:"h",max:1600},{id:"k",max:2048},{id:"o",max:i}];return a.map(function(i){return{source:o(e,t,n,r,i.id),width:i.max,height:i.max}})}function u(e,t){return t in e?e=e[t]:"error"in e||(e.error={code:"invalid_request",message:e.message||"Failed to get data from Flickr"}),e}function c(e){if(a(e),e.contacts){e=u(e,"contacts"),d(e),e.data=e.contact,delete e.contact;for(var t=0;t<e.data.length;t++){var n=e.data[t];n.id=n.nsid,n.name=n.realname||n.username,n.thumbnail=i(n,"m")}}return e}function d(e){e.page&&e.pages&&e.page!==e.pages&&(e.paging={next:"?page="+ ++e.page})}e.init({flickr:{name:"Flickr",oauth:{version:"1.0a",auth:"https://www.flickr.com/services/oauth/authorize?perms=read",request:"https://www.flickr.com/services/oauth/request_token",token:"https://www.flickr.com/services/oauth/access_token"},base:"https://api.flickr.com/services/rest",get:{me:r("flickr.people.getInfo"),"me/friends":r("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/following":r("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/followers":r("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/albums":r("flickr.photosets.getList",{per_page:"@{limit|50}"}),"me/album":r("flickr.photosets.getPhotos",{photoset_id:"@{id}"}),"me/photos":r("flickr.people.getPhotos",{per_page:"@{limit|50}"})},wrap:{me:function(e){if(a(e),e=u(e,"person"),e.id){if(e.realname){e.name=e.realname._content;var t=e.name.split(" ");e.first_name=t.shift(),e.last_name=t.join(" ")}e.thumbnail=i(e,"l"),e.picture=i(e,"l")}return e},"me/friends":c,"me/followers":c,"me/following":c,"me/albums":function(e){return a(e),e=u(e,"photosets"),d(e),e.photoset&&(e.data=e.photoset,e.data.forEach(function(e){e.name=e.title._content,e.photos="https://api.flickr.com/services/rest"+t("flickr.photosets.getPhotos",{photoset_id:e.id},!0)}),delete e.photoset),e},"me/photos":function(e){return a(e),s(e)},"default":function(e){return a(e),s(e)}},xhr:!1,jsonp:function(e,t){"get"==e.method&&(delete t.callback,t.jsoncallback=e.callbackID)}}})}(n),function(e){function t(e){!e.meta||400!==e.meta.code&&401!==e.meta.code||(e.error={code:"access_denied",message:e.meta.errorDetail})}function n(e){e&&e.id&&(e.thumbnail=e.photo.prefix+"100x100"+e.photo.suffix,e.name=e.firstName+" "+e.lastName,e.first_name=e.firstName,e.last_name=e.lastName,e.contact&&e.contact.email&&(e.email=e.contact.email))}function r(e,t){var n=t.access_token;return delete t.access_token,t.oauth_token=n,t.v=20121125,!0}e.init({foursquare:{name:"Foursquare",oauth:{version:2,auth:"https://foursquare.com/oauth2/authenticate",grant:"https://foursquare.com/oauth2/access_token"},refresh:!0,base:"https://api.foursquare.com/v2/",get:{me:"users/self","me/friends":"users/self/friends","me/followers":"users/self/friends","me/following":"users/self/friends"},wrap:{me:function(e){return t(e),e&&e.response&&(e=e.response.user,n(e)),e},"default":function(e){return t(e),e&&"response"in e&&"friends"in e.response&&"items"in e.response.friends&&(e.data=e.response.friends.items,e.data.forEach(n),delete e.response),e}},xhr:r,jsonp:r}})}(n),function(e){function t(e,t){var n=t?t.statusCode:e&&"meta"in e&&"status"in e.meta&&e.meta.status;(401===n||403===n)&&(e.error={code:"access_denied",message:e.message||(e.data?e.data.message:"Could not get response")},delete e.message)}function n(e){e.id&&(e.thumbnail=e.picture=e.avatar_url,e.name=e.login)}function r(e,t,n){if(e.data&&e.data.length&&t&&t.Link){var r=t.Link.match(/<(.*?)>;\s*rel=\"next\"/);r&&(e.paging={next:r[1]})}}e.init({github:{name:"GitHub",oauth:{version:2,auth:"https://github.com/login/oauth/authorize",grant:"https://github.com/login/oauth/access_token",response_type:"code"},scope:{basic:"",email:"user:email"},base:"https://api.github.com/",get:{me:"user","me/friends":"user/following?per_page=@{limit|100}","me/following":"user/following?per_page=@{limit|100}","me/followers":"user/followers?per_page=@{limit|100}","me/like":"user/starred?per_page=@{limit|100}"},wrap:{me:function(e,r){return t(e,r),n(e),e},"default":function(e,i,o){return t(e,i),Array.isArray(e)&&(e={data:e}),e.data&&(r(e,i,o),e.data.forEach(n)),e}},xhr:function(e){return"get"!==e.method&&e.data&&(e.headers=e.headers||{},e.headers["Content-Type"]="application/json","object"==typeof e.data&&(e.data=JSON.stringify(e.data))),!0}}})}(n),function(e){function t(e){return parseInt(e,10)}function n(e){return c(e),e.data=e.items,delete e.items,e}function r(e){return e.error?void 0:(e.name||(e.name=e.title||e.message),e.picture||(e.picture=e.thumbnailLink),e.thumbnail||(e.thumbnail=e.thumbnailLink),"application/vnd.google-apps.folder"===e.mimeType&&(e.type="folder",e.files="https://www.googleapis.com/drive/v2/files?q=%22"+e.id+"%22+in+parents"),e)}function i(e){return{source:e.url,width:e.width,height:e.height}}function o(e){e.data=e.feed.entry.map(u),delete e.feed}function a(e){if(c(e),"feed"in e&&"entry"in e.feed)e.data=e.feed.entry.map(u),delete e.feed;else{if("entry"in e)return u(e.entry);"items"in e?(e.data=e.items.map(r),delete e.items):r(e)}return e}function s(e){e.name=e.displayName||e.name,e.picture=e.picture||(e.image?e.image.url:null),e.thumbnail=e.picture}function l(e,t,n){c(e);if("feed"in e&&"entry"in e.feed){for(var r=n.query.access_token,i=0;i<e.feed.entry.length;i++){var o=e.feed.entry[i];if(o.id=o.id.$t,o.name=o.title.$t,delete o.title,o.gd$email&&(o.email=o.gd$email&&o.gd$email.length>0?o.gd$email[0].address:null,o.emails=o.gd$email,delete o.gd$email),o.updated&&(o.updated=o.updated.$t),o.link){var a=o.link.length>0?o.link[0].href:null;a&&o.link[0].gd$etag&&(a+=(a.indexOf("?")>-1?"&":"?")+"access_token="+r,o.picture=a,o.thumbnail=a),delete o.link}o.category&&delete o.category}e.data=e.feed.entry,delete e.feed}return e}function u(e){var t,n=e.media$group,r=n.media$content.length?n.media$content[0]:{},o=n.media$content||[],a=n.media$thumbnail||[],s=o.concat(a).map(i).sort(function(e,t){return e.width-t.width}),l=0,u={id:e.id.$t,name:e.title.$t,description:e.summary.$t,updated_time:e.updated.$t,created_time:e.published.$t,picture:r?r.url:null,pictures:s,images:[],thumbnail:r?r.url:null,width:r.width,height:r.height};if("link"in e)for(l=0;l<e.link.length;l++){var c=e.link[l];if(c.rel.match(/\#feed$/)){u.upload_location=u.files=u.photos=c.href;break}}if("category"in e&&e.category.length)for(t=e.category,l=0;l<t.length;l++)t[l].scheme&&t[l].scheme.match(/\#kind$/)&&(u.type=t[l].term.replace(/^.*?\#/,""));return"media$thumbnail"in n&&n.media$thumbnail.length&&(t=n.media$thumbnail,u.thumbnail=t[0].url,u.images=t.map(i)),t=n.media$content,t&&t.length&&u.images.push(i(t[0])),
u}function c(e){if("feed"in e&&e.feed.openSearch$itemsPerPage){var n=t(e.feed.openSearch$itemsPerPage.$t),r=t(e.feed.openSearch$startIndex.$t),i=t(e.feed.openSearch$totalResults.$t);i>r+n&&(e.paging={next:"?start="+(r+n)})}else"nextPageToken"in e&&(e.paging={next:"?pageToken="+e.nextPageToken})}function d(){function e(e){var n=new FileReader;n.onload=function(n){t(btoa(n.target.result),e.type+o+"Content-Transfer-Encoding: base64")},n.readAsBinaryString(e)}function t(e,t){n.push(o+"Content-Type: "+t+o+o+e),i--,s()}var n=[],r=(1e10*Math.random()).toString(32),i=0,o="\r\n",a=o+"--"+r,s=function(){},l=/^data\:([^;,]+(\;charset=[^;,]+)?)(\;base64)?,/i;this.append=function(n,r){"string"!=typeof n&&"length"in Object(n)||(n=[n]);for(var a=0;a<n.length;a++){i++;var s=n[a];if("undefined"!=typeof File&&s instanceof File||"undefined"!=typeof Blob&&s instanceof Blob)e(s);else if("string"==typeof s&&s.match(l)){var u=s.match(l);t(s.replace(l,""),u[1]+o+"Content-Transfer-Encoding: base64")}else t(s,r)}},this.onready=function(e){(s=function(){0===i&&(n.unshift(""),n.push("--"),e(n.join(a),r),n=[])})()}}function f(e,t){var n={};e.data&&"undefined"!=typeof HTMLInputElement&&e.data instanceof HTMLInputElement&&(e.data={file:e.data}),!e.data.name&&Object(Object(e.data.file).files).length&&"post"===e.method&&(e.data.name=e.data.file.files[0].name),"post"===e.method?e.data={title:e.data.name,parents:[{id:e.data.parent||"root"}],file:e.data.file}:(n=e.data,e.data={},n.parent&&(e.data.parents=[{id:e.data.parent||"root"}]),n.file&&(e.data.file=n.file),n.name&&(e.data.title=n.name));var r;if("file"in e.data&&(r=e.data.file,delete e.data.file,"object"==typeof r&&"files"in r&&(r=r.files),!r||!r.length))return void t({error:{code:"request_invalid",message:"There were no files attached with this request to upload"}});var i=new d;i.append(JSON.stringify(e.data),"application/json"),r&&i.append(r),i.onready(function(r,i){e.headers["content-type"]='multipart/related; boundary="'+i+'"',e.data=r,t("upload/drive/v2/files"+(n.id?"/"+n.id:"")+"?uploadType=multipart")})}function p(e){if("object"==typeof e.data)try{e.data=JSON.stringify(e.data),e.headers["content-type"]="application/json"}catch(t){}}var h="https://www.google.com/m8/feeds/contacts/default/full?v=3.0&alt=json&max-results=@{limit|1000}&start-index=@{start|1}";e.init({google:{name:"Google Plus",oauth:{version:2,auth:"https://accounts.google.com/o/oauth2/auth",grant:"https://accounts.google.com/o/oauth2/token"},scope:{basic:"https://www.googleapis.com/auth/plus.me profile",email:"email",birthday:"",events:"",photos:"https://picasaweb.google.com/data/",videos:"http://gdata.youtube.com",friends:"https://www.google.com/m8/feeds, https://www.googleapis.com/auth/plus.login",files:"https://www.googleapis.com/auth/drive.readonly",publish:"",publish_files:"https://www.googleapis.com/auth/drive",create_event:"",offline_access:""},scope_delim:" ",login:function(e){"none"===e.qs.display&&(e.qs.display=""),"code"===e.qs.response_type&&(e.qs.access_type="offline"),e.options.force&&(e.qs.approval_prompt="force")},base:"https://www.googleapis.com/",get:{me:"plus/v1/people/me","me/friends":"plus/v1/people/me/people/visible?maxResults=@{limit|100}","me/following":h,"me/followers":h,"me/contacts":h,"me/share":"plus/v1/people/me/activities/public?maxResults=@{limit|100}","me/feed":"plus/v1/people/me/activities/public?maxResults=@{limit|100}","me/albums":"https://picasaweb.google.com/data/feed/api/user/default?alt=json&max-results=@{limit|100}&start-index=@{start|1}","me/album":function(e,t){var n=e.query.id;delete e.query.id,t(n.replace("/entry/","/feed/"))},"me/photos":"https://picasaweb.google.com/data/feed/api/user/default?alt=json&kind=photo&max-results=@{limit|100}&start-index=@{start|1}","me/files":"drive/v2/files?q=%22@{parent|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}","me/folders":"drive/v2/files?q=%22@{id|root}%22+in+parents+and+mimeType+=+%22application/vnd.google-apps.folder%22+and+trashed=false&maxResults=@{limit|100}","me/folder":"drive/v2/files?q=%22@{id|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}"},post:{"me/files":f,"me/folders":function(e,t){e.data={title:e.data.name,parents:[{id:e.data.parent||"root"}],mimeType:"application/vnd.google-apps.folder"},t("drive/v2/files")}},put:{"me/files":f},del:{"me/files":"drive/v2/files/@{id}","me/folder":"drive/v2/files/@{id}"},wrap:{me:function(e){return e.id&&(e.last_name=e.family_name||(e.name?e.name.familyName:null),e.first_name=e.given_name||(e.name?e.name.givenName:null),e.emails&&e.emails.length&&(e.email=e.emails[0].value),s(e)),e},"me/friends":function(e){return e.items&&(c(e),e.data=e.items,e.data.forEach(s),delete e.items),e},"me/contacts":l,"me/followers":l,"me/following":l,"me/share":n,"me/feed":n,"me/albums":a,"me/photos":o,"default":a},xhr:function(e){return("post"===e.method||"put"===e.method)&&p(e),!0},form:!1}})}(n),function(e){function t(e){return{source:e.url,width:e.width,height:e.height}}function n(e){return"string"==typeof e?{error:{code:"invalid_request",message:e}}:(e&&"meta"in e&&"error_type"in e.meta&&(e.error={code:e.meta.error_type,message:e.meta.error_message}),e)}function r(e){return o(e),e&&"data"in e&&e.data.forEach(i),e}function i(e){e.id&&(e.thumbnail=e.profile_picture,e.name=e.full_name||e.username)}function o(e){"pagination"in e&&(e.paging={next:e.pagination.next_url},delete e.pagination)}e.init({instagram:{name:"Instagram",oauth:{version:2,auth:"https://instagram.com/oauth/authorize/",grant:"https://api.instagram.com/oauth/access_token"},refresh:!0,scope:{basic:"basic",friends:"relationships",publish:"likes comments"},scope_delim:" ",login:function(e){e.qs.display=""},base:"https://api.instagram.com/v1/",get:{me:"users/self","me/feed":"users/self/feed?count=@{limit|100}","me/photos":"users/self/media/recent?min_id=0&count=@{limit|100}","me/friends":"users/self/follows?count=@{limit|100}","me/following":"users/self/follows?count=@{limit|100}","me/followers":"users/self/followed-by?count=@{limit|100}","friend/photos":"users/@{id}/media/recent?min_id=0&count=@{limit|100}"},post:{"me/like":function(e,t){var n=e.data.id;e.data={},t("media/"+n+"/likes")}},del:{"me/like":"media/@{id}/likes"},wrap:{me:function(e){return n(e),"data"in e&&(e.id=e.data.id,e.thumbnail=e.data.profile_picture,e.name=e.data.full_name||e.data.username),e},"me/friends":r,"me/following":r,"me/followers":r,"me/photos":function(e){return n(e),o(e),"data"in e&&(e.data=e.data.filter(function(e){return"image"===e.type}),e.data.forEach(function(e){e.name=e.caption?e.caption.text:null,e.thumbnail=e.images.thumbnail.url,e.picture=e.images.standard_resolution.url,e.pictures=Object.keys(e.images).map(function(n){var r=e.images[n];return t(r)}).sort(function(e,t){return e.width-t.width})})),e},"default":function(e){return e=n(e),o(e),e}},xhr:function(e,t){var n=e.method,r="get"!==n;return r&&("post"!==n&&"put"!==n||!e.query.access_token||(e.data.access_token=e.query.access_token,delete e.query.access_token),e.proxy=r),r},form:!1}})}(n),function(e){function t(e,t){var n,i;return e&&"Message"in e&&(i=e.Message,delete e.Message,"ErrorCode"in e?(n=e.ErrorCode,delete e.ErrorCode):n=r(t),e.error={code:n,message:i,details:e}),e}function n(e,t){var n=t.access_token;return delete t.access_token,e.headers.Authorization="Bearer "+n,"get"!==e.method&&e.data&&(e.headers["Content-Type"]="application/json","object"==typeof e.data&&(e.data=JSON.stringify(e.data))),"put"===e.method&&(e.method="patch"),!0}function r(e){switch(e.statusCode){case 400:return"invalid_request";case 403:return"stale_token";case 401:return"invalid_token";case 500:return"server_error";default:return"server_error"}}e.init({joinme:{name:"join.me",oauth:{version:2,auth:"https://secure.join.me/api/public/v1/auth/oauth2",grant:"https://secure.join.me/api/public/v1/auth/oauth2"},refresh:!1,scope:{basic:"user_info",user:"user_info",scheduler:"scheduler",start:"start_meeting"},scope_delim:" ",login:function(e){e.options.popup.width=400,e.options.popup.height=700},base:"https://api.join.me/v1/",get:{me:"user",meetings:"meetings","meetings/info":"meetings/@{id}"},post:{"meetings/start/adhoc":function(e,t){t("meetings/start")},"meetings/start/scheduled":function(e,t){var n=e.data.meetingId;e.data={},t("meetings/"+n+"/start")},"meetings/schedule":function(e,t){t("meetings")}},patch:{"meetings/update":function(e,t){t("meetings/"+e.data.meetingId)}},del:{"meetings/delete":"meetings/@{id}"},wrap:{me:function(e,n){return t(e,n),e.email?(e.name=e.fullName,e.first_name=e.name.split(" ")[0],e.last_name=e.name.split(" ")[1],e.id=e.email,e):e},"default":function(e,n){return t(e,n),e}},xhr:n}})}(n),function(e){function t(e){e&&"errorCode"in e&&(e.error={code:e.status,message:e.message})}function n(e){return e.error?void 0:(e.first_name=e.firstName,e.last_name=e.lastName,e.name=e.formattedName||e.first_name+" "+e.last_name,e.thumbnail=e.pictureUrl,e.email=e.emailAddress,e)}function r(e){return t(e),i(e),e.values&&(e.data=e.values.map(n),delete e.values),e}function i(e){"_count"in e&&"_start"in e&&e._count+e._start<e._total&&(e.paging={next:"?start="+(e._start+e._count)+"&count="+e._count})}function o(e,t){"{}"===JSON.stringify(e)&&200===t.statusCode&&(e.success=!0)}function a(e){e.access_token&&(e.oauth2_access_token=e.access_token,delete e.access_token)}function s(e,t){e.headers["x-li-format"]="json";var n=e.data.id;e.data=("delete"!==e.method).toString(),e.method="put",t("people/~/network/updates/key="+n+"/is-liked")}e.init({linkedin:{oauth:{version:2,response_type:"code",auth:"https://www.linkedin.com/uas/oauth2/authorization",grant:"https://www.linkedin.com/uas/oauth2/accessToken"},refresh:!0,scope:{basic:"r_basicprofile",email:"r_emailaddress",friends:"",publish:"w_share"},scope_delim:" ",base:"https://api.linkedin.com/v1/",get:{me:"people/~:(picture-url,first-name,last-name,id,formatted-name,email-address)","me/friends":"people/~/connections?count=@{limit|500}","me/followers":"people/~/connections?count=@{limit|500}","me/following":"people/~/connections?count=@{limit|500}","me/share":"people/~/network/updates?count=@{limit|250}"},post:{"me/share":function(e,t){var n={visibility:{code:"anyone"}};e.data.id?n.attribution={share:{id:e.data.id}}:(n.comment=e.data.message,e.data.picture&&e.data.link&&(n.content={"submitted-url":e.data.link,"submitted-image-url":e.data.picture})),e.data=JSON.stringify(n),t("people/~/shares?format=json")},"me/like":s},del:{"me/like":s},wrap:{me:function(e){return t(e),n(e),e},"me/friends":r,"me/following":r,"me/followers":r,"me/share":function(e){return t(e),i(e),e.values&&(e.data=e.values.map(n),e.data.forEach(function(e){e.message=e.headline}),delete e.values),e},"default":function(e,n){t(e),o(e,n),i(e)}},jsonp:function(e,t){a(t),"get"===e.method&&(t.format="jsonp",t["error-callback"]=e.callbackID)},xhr:function(e,t){return"get"!==e.method?(a(t),e.headers["Content-Type"]="application/json",e.headers["x-li-format"]="json",e.proxy=!0,!0):!1}}})}(n),function(e){function t(e,t){var n=t.access_token;return delete t.access_token,t.oauth_token=n,t["_status_code_map[302]"]=200,!0}function n(e){return e.id&&(e.picture=e.avatar_url,e.thumbnail=e.avatar_url,e.name=e.username||e.full_name),e}function r(e){"next_href"in e&&(e.paging={next:e.next_href})}e.init({soundcloud:{name:"SoundCloud",oauth:{version:2,auth:"https://soundcloud.com/connect",grant:"https://soundcloud.com/oauth2/token"},base:"https://api.soundcloud.com/",get:{me:"me.json","me/friends":"me/followings.json","me/followers":"me/followers.json","me/following":"me/followings.json","default":function(e,t){t(e.path+".json")}},wrap:{me:function(e){return n(e),e},"default":function(e){return Array.isArray(e)&&(e={data:e.map(n)}),r(e),e}},xhr:t,jsonp:t}})}(n),function(e){function t(e){if(e.id){if(e.name){var t=e.name.split(" ");e.first_name=t.shift(),e.last_name=t.join(" ")}e.thumbnail=e.profile_image_url_https||e.profile_image_url}return e}function n(e){return r(e),i(e),e.users&&(e.data=e.users.map(t),delete e.users),e}function r(e){if(e.errors){var t=e.errors[0];e.error={code:"request_failed",message:t.message}}}function i(e){"next_cursor_str"in e&&(e.paging={next:"?cursor="+e.next_cursor_str})}function o(e){return Array.isArray(e)?{data:e}:e}var a="https://api.twitter.com/";e.init({twitter:{oauth:{version:"1.0a",auth:a+"oauth/authenticate",request:a+"oauth/request_token",token:a+"oauth/access_token"},login:function(e){var t="?force_login=true";this.oauth.auth=this.oauth.auth.replace(t,"")+(e.options.force?t:"")},base:a+"1.1/",get:{me:"account/verify_credentials.json","me/friends":"friends/list.json?count=@{limit|200}","me/following":"friends/list.json?count=@{limit|200}","me/followers":"followers/list.json?count=@{limit|200}","me/share":"statuses/user_timeline.json?count=@{limit|200}","me/like":"favorites/list.json?count=@{limit|200}"},post:{"me/share":function(t,n){var r=t.data;t.data=null;var i=[];r.message&&(i.push(r.message),delete r.message),r.link&&(i.push(r.link),delete r.link),r.picture&&(i.push(r.picture),delete r.picture),i.length&&(r.status=i.join(" ")),r.file?(r["media[]"]=r.file,delete r.file,t.data=r,n("statuses/update_with_media.json")):"id"in r?n("statuses/retweet/"+r.id+".json"):(e.utils.extend(t.query,r),n("statuses/update.json?include_entities=1"))},"me/like":function(e,t){var n=e.data.id;e.data=null,t("favorites/create.json?id="+n)}},del:{"me/like":function(){p.method="post";var e=p.data.id;p.data=null,callback("favorites/destroy.json?id="+e)}},wrap:{me:function(e){return r(e),t(e),e},"me/friends":n,"me/followers":n,"me/following":n,"me/share":function(e){return r(e),i(e),!e.error&&"length"in e?{data:e}:e},"default":function(e){return e=o(e),i(e),e}},xhr:function(e){return"get"!==e.method}}})}(n),function(e){function t(e,t){return null!==e&&"response"in e&&null!==e.response&&e.response.length&&(e=e.response[0],e.id=e.uid,e.thumbnail=e.picture=e.photo_max,e.name=e.first_name+" "+e.last_name,t.authResponse&&null!==t.authResponse.email&&(e.email=t.authResponse.email)),e}function n(e){if(e.error){var t=e.error;e.error={code:t.error_code,message:t.error_msg}}}e.init({vk:{name:"Vk",oauth:{version:2,auth:"https://oauth.vk.com/authorize",grant:"https://oauth.vk.com/access_token"},scope:{basic:"",email:"email",offline_access:"offline"},refresh:!0,login:function(e){e.qs.display=window.navigator&&window.navigator.userAgent&&/ipad|phone|phone|android/.test(window.navigator.userAgent.toLowerCase())?"mobile":"popup"},base:"https://api.vk.com/method/",get:{me:function(e,t){e.query.fields="id,first_name,last_name,photo_max",t("users.get")}},wrap:{me:function(e,r,i){return n(e),t(e,i)}},xhr:!1,jsonp:!0,form:!1}})}(n),function(e){function t(e){return"data"in e&&e.data.forEach(function(e){e.picture&&(e.thumbnail=e.picture),e.images&&(e.pictures=e.images.map(n).sort(function(e,t){return e.width-t.width}))}),e}function n(e){return{width:e.width,height:e.height,source:e.source}}function r(e){return"data"in e&&e.data.forEach(function(e){e.photos=e.files="https://apis.live.net/v5.0/"+e.id+"/photos"}),e}function i(e,t,n){if(e.id){var r=n.query.access_token;if(e.emails&&(e.email=e.emails.preferred),e.is_friend!==!1){var i=e.user_id||e.id;e.thumbnail=e.picture="https://apis.live.net/v5.0/"+i+"/picture?access_token="+r}}return e}function o(e,t,n){return"data"in e&&e.data.forEach(function(e){i(e,t,n)}),e}e.init({windows:{name:"Windows live",oauth:{version:2,auth:"https://login.live.com/oauth20_authorize.srf",grant:"https://login.live.com/oauth20_token.srf"},refresh:!0,logout:function(){return"http://login.live.com/oauth20_logout.srf?ts="+(new Date).getTime()},scope:{basic:"wl.signin,wl.basic",email:"wl.emails",birthday:"wl.birthday",events:"wl.calendars",photos:"wl.photos",videos:"wl.photos",friends:"wl.contacts_emails",files:"wl.skydrive",publish:"wl.share",publish_files:"wl.skydrive_update",create_event:"wl.calendars_update,wl.events_create",offline_access:"wl.offline_access"},base:"https://apis.live.net/v5.0/",get:{me:"me","me/friends":"me/friends","me/following":"me/contacts","me/followers":"me/friends","me/contacts":"me/contacts","me/albums":"me/albums","me/album":"@{id}/files","me/photo":"@{id}","me/files":"@{parent|me/skydrive}/files","me/folders":"@{id|me/skydrive}/files","me/folder":"@{id|me/skydrive}/files"},post:{"me/albums":"me/albums","me/album":"@{id}/files/","me/folders":"@{id|me/skydrive/}","me/files":"@{parent|me/skydrive}/files"},del:{"me/album":"@{id}","me/photo":"@{id}","me/folder":"@{id}","me/files":"@{id}"},wrap:{me:i,"me/friends":o,"me/contacts":o,"me/followers":o,"me/following":o,"me/albums":r,"me/photos":t,"default":t},xhr:function(t){return"get"===t.method||"delete"===t.method||e.utils.hasBinary(t.data)||("string"==typeof t.data.file?t.data.file=e.utils.toBlob(t.data.file):(t.data=JSON.stringify(t.data),t.headers={"Content-Type":"application/json"})),!0},jsonp:function(t){"get"===t.method||e.utils.hasBinary(t.data)||(t.data.method=t.method,t.method="get")}}})}(n),function(e){function t(e){e&&"meta"in e&&"error_type"in e.meta&&(e.error={code:e.meta.error_type,message:e.meta.error_message})}function n(e){if(t(e),e.query&&e.query.results&&e.query.results.profile){e=e.query.results.profile,e.id=e.guid,e.last_name=e.familyName,e.first_name=e.givenName||e.nickname;var n=[];e.first_name&&n.push(e.first_name),e.last_name&&n.push(e.last_name),e.name=n.join(" "),e.email=e.emails&&e.emails[0]?e.emails[0].handle:null,e.thumbnail=e.image?e.image.imageUrl:null}return e}function r(e,n,r){t(e),o(e,n,r);return e.query&&e.query.results&&e.query.results.contact&&(e.data=e.query.results.contact,delete e.query,Array.isArray(e.data)||(e.data=[e.data]),e.data.forEach(i)),e}function i(e){e.id=null,(e.fields||[]).forEach(function(t){"email"===t.type&&(e.email=t.value),"name"===t.type&&(e.first_name=t.value.givenName,e.last_name=t.value.familyName,e.name=t.value.givenName+" "+t.value.familyName),"yahooid"===t.type&&(e.id=t.value)})}function o(e,t,n){return e.query&&e.query.count&&n.options&&(e.paging={next:"?start="+(e.query.count+(+n.options.start||1))}),e}function a(e){return"https://query.yahooapis.com/v1/yql?q="+(e+" limit @{limit|100} offset @{start|0}").replace(/\s/g,"%20")+"&format=json"}e.init({yahoo:{oauth:{version:"1.0a",auth:"https://api.login.yahoo.com/oauth/v2/request_auth",request:"https://api.login.yahoo.com/oauth/v2/get_request_token",token:"https://api.login.yahoo.com/oauth/v2/get_token"},login:function(e){e.options.popup.width=560;try{delete e.qs.state.scope}catch(t){}},base:"https://social.yahooapis.com/v1/",get:{me:a("select * from social.profile(0) where guid=me"),"me/friends":a("select * from social.contacts(0) where guid=me"),"me/following":a("select * from social.contacts(0) where guid=me")},wrap:{me:n,"me/friends":r,"me/following":r,"default":o}}})}(n),"function"==typeof define&&define.amd&&define(function(){return n}),"object"==typeof t&&t.exports&&(t.exports=n)}).call(this,e("_process"))},{_process:10}],12:[function(e,t,n){function r(e){var t=e?e.length:0;return t?e[t-1]:void 0}t.exports=r},{}],13:[function(e,t,n){var r=e("../internal/baseEach"),i=e("../internal/createFind"),o=i(r);t.exports=o},{"../internal/baseEach":16,"../internal/createFind":34}],14:[function(e,t,n){function r(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}t.exports=r},{}],15:[function(e,t,n){function r(e,t,n){var r=typeof e;return"function"==r?void 0===t?e:a(e,t,n):null==e?s:"object"==r?i(e):void 0===t?l(e):o(e,t)}var i=e("./baseMatches"),o=e("./baseMatchesProperty"),a=e("./bindCallback"),s=e("../utility/identity"),l=e("../utility/property");t.exports=r},{"../utility/identity":59,"../utility/property":60,"./baseMatches":25,"./baseMatchesProperty":26,"./bindCallback":31}],16:[function(e,t,n){var r=e("./baseForOwn"),i=e("./createBaseEach"),o=i(r);t.exports=o},{"./baseForOwn":20,"./createBaseEach":32}],17:[function(e,t,n){function r(e,t,n,r){var i;return n(e,function(e,n,o){return t(e,n,o)?(i=r?n:e,!1):void 0}),i}t.exports=r},{}],18:[function(e,t,n){function r(e,t,n){for(var r=e.length,i=n?r:-1;n?i--:++i<r;)if(t(e[i],i,e))return i;return-1}t.exports=r},{}],19:[function(e,t,n){var r=e("./createBaseFor"),i=r();t.exports=i},{"./createBaseFor":33}],20:[function(e,t,n){function r(e,t){return i(e,t,o)}var i=e("./baseFor"),o=e("../object/keys");t.exports=r},{"../object/keys":56,"./baseFor":19}],21:[function(e,t,n){function r(e,t,n){if(null!=e){void 0!==n&&n in i(e)&&(t=[n]);for(var r=0,o=t.length;null!=e&&o>r;)e=e[t[r++]];return r&&r==o?e:void 0}}var i=e("./toObject");t.exports=r},{"./toObject":48}],22:[function(e,t,n){function r(e,t,n,s,l,u){return e===t?!0:null==e||null==t||!o(e)&&!a(t)?e!==e&&t!==t:i(e,t,r,n,s,l,u)}var i=e("./baseIsEqualDeep"),o=e("../lang/isObject"),a=e("./isObjectLike");t.exports=r},{"../lang/isObject":54,"./baseIsEqualDeep":23,"./isObjectLike":45}],23:[function(e,t,n){function r(e,t,n,r,f,m,g){var v=s(e),y=s(t),b=c,k=c;v||(b=h.call(e),b==u?b=d:b!=d&&(v=l(e))),y||(k=h.call(t),k==u?k=d:k!=d&&(y=l(t)));var w=b==d,_=k==d,x=b==k;if(x&&!v&&!w)return o(e,t,b);if(!f){var j=w&&p.call(e,"__wrapped__"),O=_&&p.call(t,"__wrapped__");if(j||O)return n(j?e.value():e,O?t.value():t,r,f,m,g)}if(!x)return!1;m||(m=[]),g||(g=[]);for(var q=m.length;q--;)if(m[q]==e)return g[q]==t;m.push(e),g.push(t);var T=(v?i:a)(e,t,n,r,f,m,g);return m.pop(),g.pop(),T}var i=e("./equalArrays"),o=e("./equalByTag"),a=e("./equalObjects"),s=e("../lang/isArray"),l=e("../lang/isTypedArray"),u="[object Arguments]",c="[object Array]",d="[object Object]",f=Object.prototype,p=f.hasOwnProperty,h=f.toString;t.exports=r},{"../lang/isArray":51,"../lang/isTypedArray":55,"./equalArrays":35,"./equalByTag":36,"./equalObjects":37}],24:[function(e,t,n){function r(e,t,n){var r=t.length,a=r,s=!n;if(null==e)return!a;for(e=o(e);r--;){var l=t[r];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++r<a;){l=t[r];var u=l[0],c=e[u],d=l[1];if(s&&l[2]){if(void 0===c&&!(u in e))return!1}else{var f=n?n(c,d,u):void 0;if(!(void 0===f?i(d,c,n,!0):f))return!1}}return!0}var i=e("./baseIsEqual"),o=e("./toObject");t.exports=r},{"./baseIsEqual":22,"./toObject":48}],25:[function(e,t,n){function r(e){var t=o(e);if(1==t.length&&t[0][2]){var n=t[0][0],r=t[0][1];return function(e){return null==e?!1:e[n]===r&&(void 0!==r||n in a(e))}}return function(e){return i(e,t)}}var i=e("./baseIsMatch"),o=e("./getMatchData"),a=e("./toObject");t.exports=r},{"./baseIsMatch":24,"./getMatchData":39,"./toObject":48}],26:[function(e,t,n){function r(e,t){var n=s(e),r=l(e)&&u(t),p=e+"";return e=f(e),function(s){if(null==s)return!1;var l=p;if(s=d(s),(n||!r)&&!(l in s)){if(s=1==e.length?s:i(s,a(e,0,-1)),null==s)return!1;l=c(e),s=d(s)}return s[l]===t?void 0!==t||l in s:o(t,s[l],void 0,!0)}}var i=e("./baseGet"),o=e("./baseIsEqual"),a=e("./baseSlice"),s=e("../lang/isArray"),l=e("./isKey"),u=e("./isStrictComparable"),c=e("../array/last"),d=e("./toObject"),f=e("./toPath");t.exports=r},{"../array/last":12,"../lang/isArray":51,"./baseGet":21,"./baseIsEqual":22,"./baseSlice":29,"./isKey":43,"./isStrictComparable":46,"./toObject":48,"./toPath":49}],27:[function(e,t,n){function r(e){return function(t){return null==t?void 0:t[e]}}t.exports=r},{}],28:[function(e,t,n){function r(e){var t=e+"";return e=o(e),function(n){return i(n,e,t)}}var i=e("./baseGet"),o=e("./toPath");t.exports=r},{"./baseGet":21,"./toPath":49}],29:[function(e,t,n){function r(e,t,n){var r=-1,i=e.length;t=null==t?0:+t||0,0>t&&(t=-t>i?0:i+t),n=void 0===n||n>i?i:+n||0,0>n&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}t.exports=r},{}],30:[function(e,t,n){function r(e){return null==e?"":e+""}t.exports=r},{}],31:[function(e,t,n){function r(e,t,n){if("function"!=typeof e)return i;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)};case 5:return function(n,r,i,o,a){return e.call(t,n,r,i,o,a)}}return function(){return e.apply(t,arguments)}}var i=e("../utility/identity");t.exports=r},{"../utility/identity":59}],32:[function(e,t,n){function r(e,t){return function(n,r){var s=n?i(n):0;if(!o(s))return e(n,r);for(var l=t?s:-1,u=a(n);(t?l--:++l<s)&&r(u[l],l,u)!==!1;);return n}}var i=e("./getLength"),o=e("./isLength"),a=e("./toObject");t.exports=r},{"./getLength":38,"./isLength":44,"./toObject":48}],33:[function(e,t,n){function r(e){return function(t,n,r){for(var o=i(t),a=r(t),s=a.length,l=e?s:-1;e?l--:++l<s;){var u=a[l];if(n(o[u],u,o)===!1)break}return t}}var i=e("./toObject");t.exports=r},{"./toObject":48}],34:[function(e,t,n){function r(e,t){return function(n,r,l){if(r=i(r,l,3),s(n)){var u=a(n,r,t);return u>-1?n[u]:void 0}return o(n,r,e)}}var i=e("./baseCallback"),o=e("./baseFind"),a=e("./baseFindIndex"),s=e("../lang/isArray");t.exports=r},{"../lang/isArray":51,"./baseCallback":15,"./baseFind":17,"./baseFindIndex":18}],35:[function(e,t,n){function r(e,t,n,r,o,a,s){var l=-1,u=e.length,c=t.length;if(u!=c&&!(o&&c>u))return!1;for(;++l<u;){var d=e[l],f=t[l],p=r?r(o?f:d,o?d:f,l):void 0;if(void 0!==p){if(p)continue;return!1}if(o){if(!i(t,function(e){return d===e||n(d,e,r,o,a,s)}))return!1}else if(d!==f&&!n(d,f,r,o,a,s))return!1}return!0}var i=e("./arraySome");t.exports=r},{"./arraySome":14}],36:[function(e,t,n){function r(e,t,n){switch(n){case i:case o:return+e==+t;case a:return e.name==t.name&&e.message==t.message;case s:return e!=+e?t!=+t:e==+t;case l:case u:return e==t+""}return!1}var i="[object Boolean]",o="[object Date]",a="[object Error]",s="[object Number]",l="[object RegExp]",u="[object String]";t.exports=r},{}],37:[function(e,t,n){function r(e,t,n,r,o,s,l){var u=i(e),c=u.length,d=i(t),f=d.length;if(c!=f&&!o)return!1;for(var p=c;p--;){var h=u[p];if(!(o?h in t:a.call(t,h)))return!1}for(var m=o;++p<c;){h=u[p];var g=e[h],v=t[h],y=r?r(o?v:g,o?g:v,h):void 0;if(!(void 0===y?n(g,v,r,o,s,l):y))return!1;m||(m="constructor"==h)}if(!m){var b=e.constructor,k=t.constructor;if(b!=k&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof k&&k instanceof k))return!1}return!0}var i=e("../object/keys"),o=Object.prototype,a=o.hasOwnProperty;t.exports=r},{"../object/keys":56}],38:[function(e,t,n){var r=e("./baseProperty"),i=r("length");t.exports=i},{"./baseProperty":27}],39:[function(e,t,n){function r(e){for(var t=o(e),n=t.length;n--;)t[n][2]=i(t[n][1]);return t}var i=e("./isStrictComparable"),o=e("../object/pairs");t.exports=r},{"../object/pairs":58,"./isStrictComparable":46}],40:[function(e,t,n){function r(e,t){var n=null==e?void 0:e[t];return i(n)?n:void 0}var i=e("../lang/isNative");t.exports=r},{"../lang/isNative":53}],41:[function(e,t,n){function r(e){return null!=e&&o(i(e))}var i=e("./getLength"),o=e("./isLength");t.exports=r},{"./getLength":38,"./isLength":44}],42:[function(e,t,n){function r(e,t){return e="number"==typeof e||i.test(e)?+e:-1,t=null==t?o:t,e>-1&&e%1==0&&t>e}var i=/^\d+$/,o=9007199254740991;t.exports=r},{}],43:[function(e,t,n){function r(e,t){var n=typeof e;if("string"==n&&s.test(e)||"number"==n)return!0;if(i(e))return!1;var r=!a.test(e);return r||null!=t&&e in o(t)}var i=e("../lang/isArray"),o=e("./toObject"),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=r},{"../lang/isArray":51,"./toObject":48}],44:[function(e,t,n){function r(e){return"number"==typeof e&&e>-1&&e%1==0&&i>=e}var i=9007199254740991;t.exports=r},{}],45:[function(e,t,n){function r(e){return!!e&&"object"==typeof e}t.exports=r},{}],46:[function(e,t,n){function r(e){return e===e&&!i(e)}var i=e("../lang/isObject");t.exports=r},{"../lang/isObject":54}],47:[function(e,t,n){function r(e){for(var t=l(e),n=t.length,r=n&&e.length,u=!!r&&s(r)&&(o(e)||i(e)),d=-1,f=[];++d<n;){var p=t[d];(u&&a(p,r)||c.call(e,p))&&f.push(p)}return f}var i=e("../lang/isArguments"),o=e("../lang/isArray"),a=e("./isIndex"),s=e("./isLength"),l=e("../object/keysIn"),u=Object.prototype,c=u.hasOwnProperty;t.exports=r},{"../lang/isArguments":50,"../lang/isArray":51,"../object/keysIn":57,"./isIndex":42,"./isLength":44}],48:[function(e,t,n){function r(e){return i(e)?e:Object(e)}var i=e("../lang/isObject");t.exports=r},{"../lang/isObject":54}],49:[function(e,t,n){function r(e){if(o(e))return e;var t=[];return i(e).replace(a,function(e,n,r,i){t.push(r?i.replace(s,"$1"):n||e)}),t}var i=e("./baseToString"),o=e("../lang/isArray"),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,s=/\\(\\)?/g;t.exports=r},{"../lang/isArray":51,"./baseToString":30}],50:[function(e,t,n){function r(e){return o(e)&&i(e)&&s.call(e,"callee")&&!l.call(e,"callee")}var i=e("../internal/isArrayLike"),o=e("../internal/isObjectLike"),a=Object.prototype,s=a.hasOwnProperty,l=a.propertyIsEnumerable;t.exports=r},{"../internal/isArrayLike":41,"../internal/isObjectLike":45}],51:[function(e,t,n){var r=e("../internal/getNative"),i=e("../internal/isLength"),o=e("../internal/isObjectLike"),a="[object Array]",s=Object.prototype,l=s.toString,u=r(Array,"isArray"),c=u||function(e){return o(e)&&i(e.length)&&l.call(e)==a};t.exports=c},{"../internal/getNative":40,"../internal/isLength":44,"../internal/isObjectLike":45}],52:[function(e,t,n){function r(e){return i(e)&&s.call(e)==o}var i=e("./isObject"),o="[object Function]",a=Object.prototype,s=a.toString;t.exports=r},{"./isObject":54}],53:[function(e,t,n){function r(e){return null==e?!1:i(e)?c.test(l.call(e)):o(e)&&a.test(e)}var i=e("./isFunction"),o=e("../internal/isObjectLike"),a=/^\[object .+?Constructor\]$/,s=Object.prototype,l=Function.prototype.toString,u=s.hasOwnProperty,c=RegExp("^"+l.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},{"../internal/isObjectLike":45,"./isFunction":52}],54:[function(e,t,n){function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}t.exports=r},{}],55:[function(e,t,n){function r(e){return o(e)&&i(e.length)&&!!E[S.call(e)]}var i=e("../internal/isLength"),o=e("../internal/isObjectLike"),a="[object Arguments]",s="[object Array]",l="[object Boolean]",u="[object Date]",c="[object Error]",d="[object Function]",f="[object Map]",p="[object Number]",h="[object Object]",m="[object RegExp]",g="[object Set]",v="[object String]",y="[object WeakMap]",b="[object ArrayBuffer]",k="[object Float32Array]",w="[object Float64Array]",_="[object Int8Array]",x="[object Int16Array]",j="[object Int32Array]",O="[object Uint8Array]",q="[object Uint8ClampedArray]",T="[object Uint16Array]",A="[object Uint32Array]",E={};E[k]=E[w]=E[_]=E[x]=E[j]=E[O]=E[q]=E[T]=E[A]=!0,E[a]=E[s]=E[b]=E[l]=E[u]=E[c]=E[d]=E[f]=E[p]=E[h]=E[m]=E[g]=E[v]=E[y]=!1;var L=Object.prototype,S=L.toString;t.exports=r},{"../internal/isLength":44,"../internal/isObjectLike":45}],56:[function(e,t,n){var r=e("../internal/getNative"),i=e("../internal/isArrayLike"),o=e("../lang/isObject"),a=e("../internal/shimKeys"),s=r(Object,"keys"),l=s?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&i(e)?a(e):o(e)?s(e):[]}:a;t.exports=l},{"../internal/getNative":40,"../internal/isArrayLike":41,"../internal/shimKeys":47,"../lang/isObject":54}],57:[function(e,t,n){function r(e){if(null==e)return[];l(e)||(e=Object(e));var t=e.length;t=t&&s(t)&&(o(e)||i(e))&&t||0;for(var n=e.constructor,r=-1,u="function"==typeof n&&n.prototype===e,d=Array(t),f=t>0;++r<t;)d[r]=r+"";for(var p in e)f&&a(p,t)||"constructor"==p&&(u||!c.call(e,p))||d.push(p);return d}var i=e("../lang/isArguments"),o=e("../lang/isArray"),a=e("../internal/isIndex"),s=e("../internal/isLength"),l=e("../lang/isObject"),u=Object.prototype,c=u.hasOwnProperty;t.exports=r},{"../internal/isIndex":42,"../internal/isLength":44,"../lang/isArguments":50,"../lang/isArray":51,"../lang/isObject":54}],58:[function(e,t,n){function r(e){e=o(e);for(var t=-1,n=i(e),r=n.length,a=Array(r);++t<r;){var s=n[t];a[t]=[s,e[s]]}return a}var i=e("./keys"),o=e("../internal/toObject");t.exports=r;
},{"../internal/toObject":48,"./keys":56}],59:[function(e,t,n){function r(e){return e}t.exports=r},{}],60:[function(e,t,n){function r(e){return a(e)?i(e):o(e)}var i=e("../internal/baseProperty"),o=e("../internal/basePropertyDeep"),a=e("../internal/isKey");t.exports=r},{"../internal/baseProperty":27,"../internal/basePropertyDeep":28,"../internal/isKey":43}],61:[function(e,t,n){(function(e){(function(){function e(e){this.tokens=[],this.tokens.links={},this.options=e||d.defaults,this.rules=f.normal,this.options.gfm&&(this.options.tables?this.rules=f.tables:this.rules=f.gfm)}function r(e,t){if(this.options=t||d.defaults,this.links=e,this.rules=p.normal,this.renderer=this.options.renderer||new i,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=p.breaks:this.rules=p.gfm:this.options.pedantic&&(this.rules=p.pedantic)}function i(e){this.options=e||{}}function o(e){this.tokens=[],this.token=null,this.options=e||d.defaults,this.options.renderer=this.options.renderer||new i,this.renderer=this.options.renderer,this.renderer.options=this.options}function a(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function s(e){return e.replace(/&([#\w]+);/g,function(e,t){return t=t.toLowerCase(),"colon"===t?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function l(e,t){return e=e.source,t=t||"",function n(r,i){return r?(i=i.source||i,i=i.replace(/(^|[^\[])\^/g,"$1"),e=e.replace(r,i),n):new RegExp(e,t)}}function u(){}function c(e){for(var t,n,r=1;r<arguments.length;r++){t=arguments[r];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}function d(t,n,r){if(r||"function"==typeof n){r||(r=n,n=null),n=c({},d.defaults,n||{});var i,s,l=n.highlight,u=0;try{i=e.lex(t,n)}catch(f){return r(f)}s=i.length;var p=function(e){if(e)return n.highlight=l,r(e);var t;try{t=o.parse(i,n)}catch(a){e=a}return n.highlight=l,e?r(e):r(null,t)};if(!l||l.length<3)return p();if(delete n.highlight,!s)return p();for(;u<i.length;u++)!function(e){return"code"!==e.type?--s||p():l(e.text,e.lang,function(t,n){return t?p(t):null==n||n===e.text?--s||p():(e.text=n,e.escaped=!0,void(--s||p()))})}(i[u])}else try{return n&&(n=c({},d.defaults,n)),o.parse(e.lex(t,n),n)}catch(f){if(f.message+="\nPlease report this to https://github.com/chjj/marked.",(n||d.defaults).silent)return"<p>An error occured:</p><pre>"+a(f.message+"",!0)+"</pre>";throw f}}var f={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:u,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:u,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:u,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};f.bullet=/(?:[*+-]|\d+\.)/,f.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,f.item=l(f.item,"gm")(/bull/g,f.bullet)(),f.list=l(f.list)(/bull/g,f.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+f.def.source+")")(),f.blockquote=l(f.blockquote)("def",f.def)(),f._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",f.html=l(f.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,f._tag)(),f.paragraph=l(f.paragraph)("hr",f.hr)("heading",f.heading)("lheading",f.lheading)("blockquote",f.blockquote)("tag","<"+f._tag)("def",f.def)(),f.normal=c({},f),f.gfm=c({},f.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),f.gfm.paragraph=l(f.paragraph)("(?!","(?!"+f.gfm.fences.source.replace("\\1","\\2")+"|"+f.list.source.replace("\\1","\\3")+"|")(),f.tables=c({},f.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),e.rules=f,e.lex=function(t,n){var r=new e(n);return r.lex(t)},e.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},e.prototype.token=function(e,t,n){for(var r,i,o,a,s,l,u,c,d,e=e.replace(/^ +$/gm,"");e;)if((o=this.rules.newline.exec(e))&&(e=e.substring(o[0].length),o[0].length>1&&this.tokens.push({type:"space"})),o=this.rules.code.exec(e))e=e.substring(o[0].length),o=o[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?o:o.replace(/\n+$/,"")});else if(o=this.rules.fences.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"code",lang:o[2],text:o[3]||""});else if(o=this.rules.heading.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"heading",depth:o[1].length,text:o[2]});else if(t&&(o=this.rules.nptable.exec(e))){for(e=e.substring(o[0].length),l={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/\n$/,"").split("\n")},c=0;c<l.align.length;c++)/^ *-+: *$/.test(l.align[c])?l.align[c]="right":/^ *:-+: *$/.test(l.align[c])?l.align[c]="center":/^ *:-+ *$/.test(l.align[c])?l.align[c]="left":l.align[c]=null;for(c=0;c<l.cells.length;c++)l.cells[c]=l.cells[c].split(/ *\| */);this.tokens.push(l)}else if(o=this.rules.lheading.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"heading",depth:"="===o[2]?1:2,text:o[1]});else if(o=this.rules.hr.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"hr"});else if(o=this.rules.blockquote.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"blockquote_start"}),o=o[0].replace(/^ *> ?/gm,""),this.token(o,t,!0),this.tokens.push({type:"blockquote_end"});else if(o=this.rules.list.exec(e)){for(e=e.substring(o[0].length),a=o[2],this.tokens.push({type:"list_start",ordered:a.length>1}),o=o[0].match(this.rules.item),r=!1,d=o.length,c=0;d>c;c++)l=o[c],u=l.length,l=l.replace(/^ *([*+-]|\d+\.) +/,""),~l.indexOf("\n ")&&(u-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+u+"}","gm"),"")),this.options.smartLists&&c!==d-1&&(s=f.bullet.exec(o[c+1])[0],a===s||a.length>1&&s.length>1||(e=o.slice(c+1).join("\n")+e,c=d-1)),i=r||/\n\n(?!\s*$)/.test(l),c!==d-1&&(r="\n"===l.charAt(l.length-1),i||(i=r)),this.tokens.push({type:i?"loose_item_start":"list_item_start"}),this.token(l,!1,n),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(o=this.rules.html.exec(e))e=e.substring(o[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===o[1]||"script"===o[1]||"style"===o[1]),text:o[0]});else if(!n&&t&&(o=this.rules.def.exec(e)))e=e.substring(o[0].length),this.tokens.links[o[1].toLowerCase()]={href:o[2],title:o[3]};else if(t&&(o=this.rules.table.exec(e))){for(e=e.substring(o[0].length),l={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/(?: *\| *)?\n$/,"").split("\n")},c=0;c<l.align.length;c++)/^ *-+: *$/.test(l.align[c])?l.align[c]="right":/^ *:-+: *$/.test(l.align[c])?l.align[c]="center":/^ *:-+ *$/.test(l.align[c])?l.align[c]="left":l.align[c]=null;for(c=0;c<l.cells.length;c++)l.cells[c]=l.cells[c].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(l)}else if(t&&(o=this.rules.paragraph.exec(e)))e=e.substring(o[0].length),this.tokens.push({type:"paragraph",text:"\n"===o[1].charAt(o[1].length-1)?o[1].slice(0,-1):o[1]});else if(o=this.rules.text.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"text",text:o[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var p={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:u,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:u,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};p._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,p._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,p.link=l(p.link)("inside",p._inside)("href",p._href)(),p.reflink=l(p.reflink)("inside",p._inside)(),p.normal=c({},p),p.pedantic=c({},p.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),p.gfm=c({},p.normal,{escape:l(p.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:l(p.text)("]|","~]|")("|","|https?://|")()}),p.breaks=c({},p.gfm,{br:l(p.br)("{2,}","*")(),text:l(p.gfm.text)("{2,}","*")()}),r.rules=p,r.output=function(e,t,n){var i=new r(t,n);return i.output(e)},r.prototype.output=function(e){for(var t,n,r,i,o="";e;)if(i=this.rules.escape.exec(e))e=e.substring(i[0].length),o+=i[1];else if(i=this.rules.autolink.exec(e))e=e.substring(i[0].length),"@"===i[2]?(n=":"===i[1].charAt(6)?this.mangle(i[1].substring(7)):this.mangle(i[1]),r=this.mangle("mailto:")+n):(n=a(i[1]),r=n),o+=this.renderer.link(r,null,n);else if(this.inLink||!(i=this.rules.url.exec(e))){if(i=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(i[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(i[0])&&(this.inLink=!1),e=e.substring(i[0].length),o+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):a(i[0]):i[0];else if(i=this.rules.link.exec(e))e=e.substring(i[0].length),this.inLink=!0,o+=this.outputLink(i,{href:i[2],title:i[3]}),this.inLink=!1;else if((i=this.rules.reflink.exec(e))||(i=this.rules.nolink.exec(e))){if(e=e.substring(i[0].length),t=(i[2]||i[1]).replace(/\s+/g," "),t=this.links[t.toLowerCase()],!t||!t.href){o+=i[0].charAt(0),e=i[0].substring(1)+e;continue}this.inLink=!0,o+=this.outputLink(i,t),this.inLink=!1}else if(i=this.rules.strong.exec(e))e=e.substring(i[0].length),o+=this.renderer.strong(this.output(i[2]||i[1]));else if(i=this.rules.em.exec(e))e=e.substring(i[0].length),o+=this.renderer.em(this.output(i[2]||i[1]));else if(i=this.rules.code.exec(e))e=e.substring(i[0].length),o+=this.renderer.codespan(a(i[2],!0));else if(i=this.rules.br.exec(e))e=e.substring(i[0].length),o+=this.renderer.br();else if(i=this.rules.del.exec(e))e=e.substring(i[0].length),o+=this.renderer.del(this.output(i[1]));else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),o+=this.renderer.text(a(this.smartypants(i[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else e=e.substring(i[0].length),n=a(i[1]),r=n,o+=this.renderer.link(r,null,n);return o},r.prototype.outputLink=function(e,t){var n=a(t.href),r=t.title?a(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,r,this.output(e[1])):this.renderer.image(n,r,a(e[1]))},r.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},r.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,n="",r=e.length,i=0;r>i;i++)t=e.charCodeAt(i),Math.random()>.5&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},i.prototype.code=function(e,t,n){if(this.options.highlight){var r=this.options.highlight(e,t);null!=r&&r!==e&&(n=!0,e=r)}return t?'<pre><code class="'+this.options.langPrefix+a(t,!0)+'">'+(n?e:a(e,!0))+"\n</code></pre>\n":"<pre><code>"+(n?e:a(e,!0))+"\n</code></pre>"},i.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},i.prototype.html=function(e){return e},i.prototype.heading=function(e,t,n){return"<h"+t+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"},i.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},i.prototype.list=function(e,t){var n=t?"ol":"ul";return"<"+n+">\n"+e+"</"+n+">\n"},i.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},i.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},i.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},i.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},i.prototype.tablecell=function(e,t){var n=t.header?"th":"td",r=t.align?"<"+n+' style="text-align:'+t.align+'">':"<"+n+">";return r+e+"</"+n+">\n"},i.prototype.strong=function(e){return"<strong>"+e+"</strong>"},i.prototype.em=function(e){return"<em>"+e+"</em>"},i.prototype.codespan=function(e){return"<code>"+e+"</code>"},i.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},i.prototype.del=function(e){return"<del>"+e+"</del>"},i.prototype.link=function(e,t,n){if(this.options.sanitize){try{var r=decodeURIComponent(s(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(i){return""}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:"))return""}var o='<a href="'+e+'"';return t&&(o+=' title="'+t+'"'),o+=">"+n+"</a>"},i.prototype.image=function(e,t,n){var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">"},i.prototype.text=function(e){return e},o.parse=function(e,t,n){var r=new o(t,n);return r.parse(e)},o.prototype.parse=function(e){this.inline=new r(e.links,this.options,this.renderer),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},o.prototype.next=function(){return this.token=this.tokens.pop()},o.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},o.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},o.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,n,r,i,o="",a="";for(n="",e=0;e<this.token.header.length;e++)r={header:!0,align:this.token.align[e]},n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(o+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",i=0;i<t.length;i++)n+=this.renderer.tablecell(this.inline.output(t[i]),{header:!1,align:this.token.align[i]});a+=this.renderer.tablerow(n)}return this.renderer.table(o,a);case"blockquote_start":for(var a="";"blockquote_end"!==this.next().type;)a+=this.tok();return this.renderer.blockquote(a);case"list_start":for(var a="",s=this.token.ordered;"list_end"!==this.next().type;)a+=this.tok();return this.renderer.list(a,s);case"list_item_start":for(var a="";"list_item_end"!==this.next().type;)a+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(a);case"loose_item_start":for(var a="";"list_item_end"!==this.next().type;)a+=this.tok();return this.renderer.listitem(a);case"html":var l=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(l);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},u.exec=u,d.options=d.setOptions=function(e){return c(d.defaults,e),d},d.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new i,xhtml:!1},d.Parser=o,d.parser=o.parse,d.Renderer=i,d.Lexer=e,d.lexer=e.lex,d.InlineLexer=r,d.inlineLexer=r.output,d.parse=d,"undefined"!=typeof t&&"object"==typeof n?t.exports=d:"function"==typeof define&&define.amd?define(function(){return d}):this.marked=d}).call(function(){return this||("undefined"!=typeof window?window:e)}())}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[6]);